// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dojo/dom-geometry dojo/dom-class dojo/Evented dojo/debounce".split(" "),function(p,h,n,c,a,f,d,g){return p([c,d],{baseClass:"jimu-dijit-gridlayout",declaredClass:"jimu.dijit.GridLayout",container:null,layoutDefinition:null,components:null,editable:!1,_layout:null,_coordinates:null,postCreate:function(){this.inherited(arguments);this._coordinates={};var a={settings:{hasHeaders:!1,
resizeEnabled:this.editable,reorderEnabled:this.editable,selectionEnabled:this.editable},dimensions:{borderWidth:1,dragProxyWidth:0,dragProxyHeight:0},content:this.layoutDefinition};require(["libs/goldenlayout/goldenlayout"],h.hitch(this,function(m){this._layout=new m(a,this.container);this._layout.registerComponent("jimu grid",h.hitch(this,function(a,b){var e;a.parent.config.id=b.id;n.some(this.components,function(m){if(m.id===b.id)return e=m.dijit,a.getElement().html(m.dijit.domNode),!0},this);
a.on("resize",g(h.hitch(this,function(){0<a.width&&0<a.height&&e&&"function"===typeof e.resize&&e.resize(a.width,a.height)}),200));a.on("select",h.hitch(this,function(){this.editable&&a.parent.select();this.emit("mask-click",a.parent.config.id)}))}));this._layout.on("initialised",h.hitch(this,function(){this._resetCoordinate();this.emit("initialised")}));this._layout.on("stateChanged",h.hitch(this,function(){this._resetCoordinate()}));this._layout.init();this.editable||f.add(this._layout.root.childElementContainer[0],
"viewonly");f.add(this._layout.root.childElementContainer[0],"jimu-dijit-gridlayout");setTimeout(h.hitch(this,this.resize),100)}))},destroy:function(){n.forEach(this.components,function(a){a.dijit.destroy()});this._layout.destroy();this.inherited(arguments)},getLayoutDefinition:function(){return this._layout.toConfig().content},resize:function(){var m=a.getMarginBox(this.container);this._layout.updateSize(m.w,m.h)},getComponentSize:function(a){return(a=this._layout.root.contentItems[0].getItemsById(a))&&
0<a.length?(a=a[0].container,{w:a.width,h:a.height}):{w:0,h:0}},getSize:function(){return{w:this._layout.width,h:this._layout.height}},setVisible:function(a,c){var m=this._layout.root.contentItems[0].getItemsById(a);m&&0<m.length&&!1===c?this._hideComponent(m[0]):m&&0!==m.length||!0!==c||this._showComponent(a)},_hideComponent:function(a){a.parent&&a.parent.removeChild(a,!0)},_showComponent:function(a){var m,c,b,e,k,d,g;n.some(this.components,function(b){if(b.id===a)return m=b,!0},this);m&&(e={id:a,
type:"component",componentName:"jimu grid",componentState:{id:a}},c=this._coordinates[a],k=this._layout.root,c?(c[0].type!==k.contentItems[0].type&&(d=k.contentItems[0],k.replaceChild(d,{type:c[0].type,content:[]}),k.contentItems[0].addChild(d)),b=k,n.forEach(c,function(a){g=a.index<=b.contentItems.length?a.index:b.contentItems.length;"component"===a.type?b.addChild(e,g):("stack"!==a.type&&b.contentItems[a.index].type===a.type||b.addChild({type:a.type,content:[]},g),b=b.contentItems[g])},this)):("stack"===
k.contentItems[0].type&&(d=k.contentItems[0],k.replaceChild(d,{type:"column",content:[]}),k.contentItems[0].addChild(d)),k.contentItems[0].addChild(e)))},_resetCoordinate:function(){var a=this._layout.root.getItemsByType("component"),c=function(a,b){var e=a.parent;e&&(n.some(e.contentItems,function(e,m){if(e===a)return b.push({type:e.type,index:m}),!0}),c(e,b))};n.forEach(a,function(a){var b=[];c(a,b);this._coordinates[a.config.id]=b.reverse()},this)}})})},"widgets/Infographic/DijitFactory":function(){define("dojo/aspect dojo/_base/lang ./dijits/TextDijit ./dijits/ImageDijit ./dijits/ChartDijit ./dijits/GaugeDijit ./dijits/NumberDijit".split(" "),
function(p,h,n,c,a,f,d){var g={},m={},r=null,l=null,b=null,e=null,k={};g._dijits=m;g.createDijit=function(g){if(m[g.id])return m[g.id];var q;switch(g.type){case "text":q=n;break;case "image":q=c;break;case "chart":q=a;break;case "gauge":q=f;break;case "number":q=d}if(!q)return console.error("Unknow type:",g.type),null;var v={nls:r,config:g.config,map:l,inSettingPage:b,appConfig:e,jsonId:g.id};h.mixin(v,k);q=new q(v);p.after(q,"destroy",function(){delete m[g.id]});return m[g.id]=q};g.setNls=function(b){r=
b};g.setMap=function(b){l=b;Object.keys(m).forEach(function(b){m[b].setMap(l)})};g.setInSettingPage=function(a){b=a;Object.keys(m).forEach(function(a){m[a].setInSettingPage(b)})};g.setAppConfig=function(b){e=b;Object.keys(m).forEach(function(b){m[b].setAppConfig(e)})};g.setContext=function(b){k=b;Object.keys(m).forEach(function(b){h.mixin(m[b],k)})};return g})},"widgets/Infographic/dijits/TextDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(p,
h,n,c){return p([n],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"text",config:null,postCreate:function(){this.setConfig(this.config)},setConfig:function(a){this.config=a;h.empty(this.domNode);h.addClass(this.domNode,"table-layout-container");h.addClass(this.domNode,"no-trim");this.innerDom=h.create("div",{},this.domNode);h.place(this.innerDom,this.domNode);a={};c.background.setStyle(this.config.background,a,this);c.font.setStyle(this.config.font,a);c.font.setText(this.config,this);h.setStyle(this.innerDom,
a)}})})},"widgets/Infographic/dijits/BaseDijit":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(p,h,n){return p([h,n],{templateString:"\x3cdiv\x3ePlease create a sub class\x3c/div\x3e",type:"BaseDijit",config:null,inSettingPage:!0,appConfig:null,constructor:function(c){this.config=c.config},setInSettingPage:function(c){this.inSettingPage=c},setConfig:function(c){this.config=c},setMap:function(c){this.map=c},setDataSource:function(c){this.dataSource=c},
resize:function(){},setAppConfig:function(c){this.appConfig=c},onDataSourceDataUpdate:function(c){this.data=c},isDarkTheme:function(){var c=!1;this.appConfig&&("DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&(c=!0):c=!0);return c}})})},"widgets/Infographic/dijits/styleUtils":function(){define(["dojo/on","dojo/_base/lang","jimu/utils"],function(p,h,n){var c={background:{setStyle:function(a,
f,d){if(!a)return{};f||(f={});c.background.setBackgroundColor(a,f);c.background.setAlignment(a,f);c.background.setLink(a,f,d)},setBackgroundColor:function(a,c){a.backgroundColor&&(c.backgroundColor=a.backgroundColor)},setAlignment:function(a,c){if(a.alignment){if(a.alignment.horizontal)switch(a.alignment.horizontal){case "left":c.textAlign="left";break;case "center":c.textAlign="center";break;case "right":c.textAlign="right";break;default:c.textAlign="center"}if(a.alignment.vertical)switch(c.display=
"table-cell",a.alignment.vertical){case "top":c.verticalAlign="top";break;case "middle":c.verticalAlign="middle";break;case "bottom":c.verticalAlign="bottom";break;default:c.verticalAlign="middle"}}},setLink:function(a,c,d){d.clickHanlder&&(d.clickHanlder[0]&&d.clickHanlder[0].remove(),d.clickHanlder=null,c.cursor="auto");a.link&&(d.clickHanlder=d.own(p(d.domNode,"click",h.hitch(d,function(){window.open(a.link)}))),c.cursor="pointer")}},font:{setText:function(a,c){var d="";a.text&&(d=a.text);c.innerDom.innerHTML=
d},setStyle:function(a,f){if(!a)return{};f||(f={});c.font.setFont(a,f);c.font.setTextColor(a,f);c.font.setFontSize(a,f)},setFont:function(a,c){c.fontWeight="normal";c.fontStyle="normal";c.textDecoration="none";a.font&&(a.font.fontFamily&&(c.fontFamily=a.font.fontFamily),a.font.bold&&(c.fontWeight="bold"),a.font.italic&&(c.fontStyle="italic"),a.font.underline&&(c.textDecoration="underline"))},setTextColor:function(a,c){a.textColor&&(c.color=a.textColor)},setFontSize:function(a,c){a.fontSize&&(c.fontSize=
a.fontSize+"px")}},image:{setStyle:function(a,f,d){if(!a)return{};f||(f={});c.image.setBackgroundImg(a,f,d);c.image.setAlignment(a,f)},setBackgroundImg:function(a,c,d){var g="";if(g=a&&!a.image&&d&&d.folderUrl?"url("+d.folderUrl+"/images/default_image.png)":"url("+n.processUrlInWidgetConfig(a.image,d.folderUrl)+")")c.backgroundImage=g,c.backgroundRepeat="no-repeat",c.backgroundSize="contain"},setAlignment:function(a,c){if(a&&a.background){var d="center",g="center";if(a.background.alignment){a.background.alignment.horizontal&&
(d=a.background.alignment.horizontal);if(a.background.alignment.vertical)switch(a.background.alignment.vertical){case "top":g="top";break;case "middle":g="center";break;case "bottom":g="bottom";break;default:c.verticalAlign="center"}c.backgroundPosition=d+" "+g}}}},dataFormat:{getText:function(a,f){var d="";a.dataFormat&&(d=f?f:a.text,d=c.dataFormat.setDataFomat(a,d),a.dataFormat.prefix&&(d=a.dataFormat.prefix+" "+d),a.dataFormat.suffix&&(d=d+" "+a.dataFormat.suffix));return d},setDataFomat:function(a,
c){var d=a.dataFormat.unit;"none"===a.dataFormat.unit?d="":"percentage"===a.dataFormat.unit&&(d="%");return c=c+d+"("+a.dataFormat.decimalPlaces+") "}}};return c})},"widgets/Infographic/dijits/ImageDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(p,h,n,c){return p([n],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"image",config:null,constructor:function(a){this.config=a.config},postCreate:function(){this.setConfig(this.config)},setConfig:function(a){this.config=
a;this.domNode.innerHTML="";h.addClass(this.domNode,"table-layout-container");this.innerDom=h.create("div",{"class":"image-node"},this.domNode);h.place(this.innerDom,this.domNode);a={};c.background.setStyle(this.config.background,a,this);c.image.setStyle(this.config,a,this);h.setStyle(this.innerDom,a)}})})},"widgets/Infographic/dijits/ChartDijit":function(){define("dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/declare ./BaseDijit jimu/dijit/StatisticsChart jimu/DataSourceManager jimu/LayerInfos/LayerInfos".split(" "),
function(p,h,n,c,a,f,d,g){return c([a],{templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv" class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3c/div\x3e',type:"chart",baseClass:"infographic-chart-dijit",layerInfosObj:null,dataSourceManager:null,featuresCountForPreview:50,dataSource:null,config:null,map:null,dataSourceType:"",featureLayer:null,constructor:function(a){this.config=a.config;this.layerInfosObj=g.getInstanceSync();this.dataSourceManager=d.getInstance()},postCreate:function(){this.inherited(arguments);
this.domNode.style.width="100%";this.domNode.style.height="100%";var a={_legendNls:this.nls.legend,theme:this._getChartTheme(),map:null,isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1};this.inSettingPage||(a.map=this.map);this.chart=new f(a);this.chart.placeAt(this.domNode);this._updateBackgroundColor()},_getChartTheme:function(){return this.isDarkTheme()?"dark":"light"},clearChart:function(){this._showNodata()},startup:function(){this.inherited(arguments);setTimeout(p.hitch(this,
function(){this.chart.resizeByParent();this.inSettingPage?this._tryUpdateStatisticsChart():this.dataSource&&this.setDataSource(this.dataSource)}),200)},destroy:function(){this.chart&&this.chart.destroy();this.chart=null;this.inherited(arguments)},resize:function(){this.chart&&this.chart.resizeByParent()},setDataSource:function(a){this.dataSourceType="";this.featureLayer=null;this.inherited(arguments);if(a)if(a.layerId)this._setDataSourceForLayerId(a);else if(a.frameWorkDsId){var c=this._getDsTypeInfoAndDsMeta(a.frameWorkDsId),
m=c.dsTypeInfo,c=c.dsMeta;m&&c&&("Features"===c.type?this._setDataSourceForFrameworkFeatures(a,m,c):"FeatureStatistics"===c.type&&this._setDataSourceForFeatureStatistics(a,m,c))}},_getDsTypeInfoAndDsMeta:function(a){var c={dsTypeInfo:null,dsMeta:null};c.dsTypeInfo=this.dataSourceManager.parseDataSourceId(a);var m=this.appConfig.dataSource&&this.appConfig.dataSource.dataSources;m&&(c.dsMeta=m[a]);return c},_updateBackgroundColor:function(){this.config&&this.config.backgroundColor&&this.setBackgroundColor(this.config.backgroundColor)},
setBackgroundColor:function(a){this.domNode.style.backgroundColor=a},setConfig:function(a){this.config=a;this._updateBackgroundColor();this._tryUpdateStatisticsChart()},onDataSourceDataUpdate:function(a){this.inherited(arguments);"CLIENT_FEATURES"===this.dataSourceType?this._onDataUpdateForClientFeatures(a):"FRAMEWORK_STATISTICS"===this.dataSourceType?this._onDataUpdateForFrameworkStatistics(a):"FRAMEWORK_FEATURES"===this.dataSourceType&&this._onDataUpdateForFrameworkFeatures(a)},_tryUpdateStatisticsChart:function(){this._hideNodata();
var a=this._getChartConfigFromConfig();a?this.domNode.parentNode?this.data?(this.data.features||(this.data.features=[]),0<this.data.features.length?"CLIENT_FEATURES"===this.dataSourceType?this._tryUpdateStatisticsChartForClientFeatures(a):"FRAMEWORK_FEATURES"===this.dataSourceType?this._tryUpdateStatisticsChartForFrameworkFeatures(a):"FRAMEWORK_STATISTICS"===this.dataSourceType&&this._tryUpdateStatisticsChartForFrameworkStatistics(a):this._showMockData(a)):this._showNodata():this._showNodata():this._showNodata()},
_getNodataTextColor:function(){var a="";this.config&&(a="pie"===this.config.type?this.config.dataLabelColor:this.config.horizontalAxisTextColor||this.config.verticalAxisTextColor);a||(a="#666");return a},_getChartConfigFromConfig:function(){var a=null;if(this.config&&this.config.mode&&this.config.type){var a=p.clone(this.config),c=a.type,d=["backgroundColor","colors","showLegend","legendTextColor"],d="pie"===c?d.concat(["showDataLabel","dataLabelColor"]):d.concat(["showHorizontalAxis","horizontalAxisTextColor",
"showVerticalAxis","verticalAxisTextColor"]),b={};a.types=[{type:c,display:b}];n.forEach(d,p.hitch(this,function(e){b[e]=a[e];delete a[e]}))}return a},_hasFeatures:function(){return this.data&&this.data.features&&0<=this.data.features.length},_showNodata:function(){h.addClass(this.domNode,"no-data");this.chart.clear()},_hideNodata:function(){h.removeClass(this.domNode,"no-data")},_showMockData:function(a){a=p.clone(a);var c=[];a.labelField&&c.push(a.labelField);a.categoryField&&c.push(a.categoryField);
a.valueFields&&(c=c.concat(a.valueFields));var d={fields:[]},b={attributes:{}};d.fields=n.map(c,p.hitch(this,function(a){b.attributes[a]=0;return{name:a,type:"esriFieldTypeInteger",alias:a}}));this.chart.resizeByParent();this.chart.createClientCharts(d,[b],a)},_setDataSourceForLayerId:function(a){this.dataSourceType="CLIENT_FEATURES";(a=this.layerInfosObj.getLayerInfoById(a.layerId))&&a.getLayerObject().then(p.hitch(this,function(a){this.featureLayer=a;this._tryUpdateStatisticsChart()}))},_onDataUpdateForClientFeatures:function(){this._tryUpdateStatisticsChart()},
_tryUpdateStatisticsChartForClientFeatures:function(a){if(this.featureLayer){var c=this.data.features;c&&this.inSettingPage&&(c=c.slice(0,this.featuresCountForPreview));this.chart.resizeByParent();this.chart.createClientCharts(this.featureLayer,c,a)}else this._showNodata()},_setDataSourceForFrameworkFeatures:function(){this.dataSourceType="FRAMEWORK_FEATURES";this._tryUpdateStatisticsChart()},_onDataUpdateForFrameworkFeatures:function(){this._tryUpdateStatisticsChart()},_tryUpdateStatisticsChartForFrameworkFeatures:function(a){var c=
this._getDsTypeInfoAndDsMeta(this.dataSource.frameWorkDsId).dsMeta;if(c){var d=this.data.features;d&&this.inSettingPage&&(d=d.slice(0,this.featuresCountForPreview));this.chart.resizeByParent();this.chart.createClientCharts(c.dataSchema,d,a)}else this._showNodata()},_setDataSourceForFeatureStatistics:function(){this.dataSourceType="FRAMEWORK_STATISTICS";this._tryUpdateStatisticsChart()},_onDataUpdateForFrameworkStatistics:function(){this._tryUpdateStatisticsChart()},_tryUpdateStatisticsChartForFrameworkStatistics:function(a){var c=
this._getDsTypeInfoAndDsMeta(this.dataSource.frameWorkDsId).dsMeta;c?(this.chart.resizeByParent(),this.chart.createServerStatisticsCharts(c.dataSchema,this.data.features,a)):this._showNodata()}})})},"jimu/dijit/StatisticsChart":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dijit/popup dijit/_WidgetBase dijit/TooltipDialog dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/StatisticsChart.html esri/lang esri/graphic esri/graphicsUtils esri/symbols/jsonUtils esri/layers/FeatureLayer jimu/utils jimu/portalUrlUtils jimu/clientStatisticsUtils jimu/dijit/Chart jimu/dijit/_StatisticsChartSettings jimu/dijit/LoadingIndicator".split(" "),
function(p,h,n,c,a,f,d,g,m,r,l,b,e,k,q,y,v,D,z,B,u,C,w,E,F){return c([l,e,k,h],{baseClass:"jimu-dijit-statistics-chart",templateString:q,theme:"light",noMoreThanOneChartClassName:"no-more-than-one-chart",hasTitleClassName:"has-title",charts:null,paramsDijits:null,tooltipDialogs:null,currentChartIndex:-1,tempGraphics:null,maxPreviewFeaturesCount:20,tooltipColor:"green",floatNumberFieldDecimalPlace:null,popupFieldInfosObj:null,config:null,features:null,featureLayer:null,map:null,fontColor:"#333333",
isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1,initialChartIndex:0,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];this.isBigPreview&&(this.showZoomIcon=!1)},postCreate:function(){this.inherited(arguments);this.showSettingIcon?this.own(p(document.body,"click",a.hitch(this,this._onDocumentBodyClick))):d.destroy(this.settingsIcon);this.showZoomIcon?this.own(p(this.zoominIcon,"click",a.hitch(this,
function(){this.emit("zoomin")}))):d.destroy(this.zoominIcon);this.isBigPreview&&(this.chartContainer.style.maxHeight="auto",d.addClass(this.domNode,"big-preview"));this.zoominIcon.title=this.nls.enlarge;this.settingsIcon.title=this.nls.setting;d.addClass(this.domNode,this.noMoreThanOneChartClassName)},destroy:function(){this.clear();this.inherited(arguments)},resize:function(b,a){if(0<b||"string"===typeof b&&0<b.length)this.domNode.style.width=b;if(0<a||"string"===typeof a&&0<a.length)this.domNode.style.height=
a;this._resize()},resizeByParent:function(){this.domNode.style.width="100%";this.domNode.style.height="100%";this._resize()},_resize:function(){this._calculateChartBox();0<=this.currentChartIndex&&this._showChart(this.currentChartIndex)},createServerStatisticsCharts:function(b,e,c){var x=b.fields,d={type:"Table",fields:[]},k=a.clone(c),g=c.mode;"category"===g?(k.valueFields=[],d.fields=f.map(c.valueFields,a.hitch(this,function(b){var a=c.operation;"average"===a&&(a="avg");var e=b+"_"+a;b=b+"_"+a;
k.valueFields.push(e);return{name:e,type:"esriFieldTypeDouble",alias:b}})),f.some(x,a.hitch(this,function(b){return b.name===c.categoryField?(d.fields.push(b),!0):!1}))):"count"===g?(k.mode="feature",k.labelField=c.categoryField,b=b.fields[0].name+"_count",k.valueFields=[b],f.some(x,a.hitch(this,function(b){return b.name===c.categoryField?(d.fields.push(b),!0):!1})),d.fields.push({name:b,type:"esriFieldTypeInteger",alias:this.nls.count})):"field"===g&&(k.valueFields=[],d.fields=f.map(c.valueFields,
a.hitch(this,function(b){var a=c.operation;"average"===a&&(a="avg");var e=b+"_"+a;b=b+"_"+a;k.valueFields.push(e);return{name:e,type:"esriFieldTypeDouble",alias:b}})));return this._getLoadedLayer(d).then(a.hitch(this,function(b){this._createChartsAsync({featureLayer:b,features:e,config:k})}))},createClientCharts:function(b,e,c){return this._getLoadedLayer(b).then(a.hitch(this,function(b){this._createChartsAsync({featureLayer:b,features:e,config:c})}))},_getLoadedLayer:function(b){var e=new n,c=null,
c="string"===typeof b?new B(b):"esri.layers.FeatureLayer"===b.declaredClass?b:new B({layerDefinition:a.clone(b),featureSet:null});c.loaded?e.resolve(c):this.own(p(c,"load",a.hitch(this,function(){e.resolve(c)})));return e},_createChartsAsync:function(b){setTimeout(a.hitch(this,function(){this._createCharts(b)}),0)},_createCharts:function(e){try{this.loading.hide();this.clear();e.features&&(e.features=f.filter(e.features,a.hitch(this,function(b){return!!b.attributes})));this.config=e.config;this.features=
e.features;this.featureLayer=e.featureLayer;this.config.highLightColor||(this.config.highLightColor="#00ffff");this._updatePopupFieldInfos();this._calculateDecimalPlaceForFloatField();this.chartTitle.innerHTML=u.stripHTML(this.config.name||"");this.chartTitle.title=this.chartTitle.innerHTML;this.chartTitle.title?d.addClass(this.domNode,this.hasTitleClassName):d.removeClass(this.domNode,this.hasTitleClassName);1>=e.config.types.length?d.addClass(this.domNode,this.noMoreThanOneChartClassName):d.removeClass(this.domNode,
this.noMoreThanOneChartClassName);var c=this._calculateChartBox(),k=c.w+"px",x=c.h+"px",g=f.map(e.config.types,a.hitch(this,function(b){var a=d.create("div",{"class":"chart-div",style:{width:k,height:x}},this.chartContainer),e=d.toDom("\x3cli class\x3d'paging-li'\x3e\x3ca class\x3d'paging-a'\x3e\x3c/a\x3e\x3c/li\x3e");d.place(e,this.pagingUl);e=b.type;b=b.display;b.backgroundColor||(b.backgroundColor="transparent");b.hasOwnProperty("showLegend")||(b.showLegend=!1);b.legendTextColor||(b.legendTextColor=
this.fontColor);"pie"===e?(b.hasOwnProperty("showDataLabel")||(b.showDataLabel=!0),b.dataLabelColor||(b.dataLabelColor=this.fontColor)):(b.hasOwnProperty("showHorizontalAxis")||(b.showHorizontalAxis=!0),b.horizontalAxisTextColor||(b.horizontalAxisTextColor=this.fontColor),b.hasOwnProperty("showVerticalAxis")||(b.showVerticalAxis=!0),b.verticalAxisTextColor||(b.verticalAxisTextColor=this.fontColor));return a})),c=null;"feature"===this.config.mode?c=this._createFeatureModeCharts(e,g):"category"===this.config.mode?
c=this._createCategoryModeCharts(e,g):"count"===this.config.mode?c=this._createCountModeCharts(e,g):"field"===this.config.mode&&(c=this._createFieldModeCharts(e,g));this.charts=c.charts;this.paramsDijits=c.paramsDijits;this.tooltipDialogs=f.map(this.paramsDijits,a.hitch(this,function(a){var e=d.create("div");a.placeAt(e);return new b({content:e})}));e=0;0<=this.initialChartIndex&&this.charts.length>=this.initialChartIndex+1&&(e=this.initialChartIndex);this._showChart(e)}catch(A){console.error(A)}},
_calculateChartBox:function(){var b=d.getContentBox(this.domNode),a=b.h;0<this.resultsHeader.clientHeight&&(a=d.getMarginBox(this.resultsHeader),a=b.h-a.h);b=60;a<b&&(b=a);d.setStyle(this.leftArrow,"height",b+"px");d.setStyle(this.rightArrow,"height",b+"px");d.setStyle(this.chartContainer,"height",a+"px");return d.getContentBox(this.chartContainer)},_updatePopupFieldInfos:function(){this.popupFieldInfosObj={};var b=null;if(this.config.url&&this.map&&this.map.itemInfo&&this.map.itemInfo.itemData){var e=
u.removeSuffixSlashes(this.config.url),e=C.removeProtocol(e),c=this.map.itemInfo.itemData.operationalLayers,k=e.split("/"),d=parseInt(k[k.length-1],10);c&&0<c.length&&f.some(c,a.hitch(this,function(a){var c=a.url;if(c&&(c=u.removeSuffixSlashes(c),c=C.removeProtocol(c),0<=e.indexOf(c)))if(e===c){if(a.popupInfo&&a.popupInfo.fieldInfos)return b=a.popupInfo.fieldInfos,!0}else if(e.length>c.length&&a.layers&&0<=d&&(a=a[d])&&a.popupInfo&&a.popupInfo.fieldInfos)return b=a.popupInfo.fieldInfos,!0;return!1}))}b&&
0<b.length&&f.forEach(b,a.hitch(this,function(b){this.popupFieldInfosObj[b.fieldName]=b}))},_calculateDecimalPlaceForFloatField:function(){this.floatNumberFieldDecimalPlace={};var b=[];this.config.labelField&&b.push(this.config.labelField);this.config.categoryField&&b.push(this.config.categoryField);this.config.valueFields&&(b=b.concat(this.config.valueFields));var e=f.filter(b,a.hitch(this,function(b){return this._isFloatNumberField(b)})),c={};f.forEach(e,a.hitch(this,function(b){c[b]=[]}));(b=this.features)&&
0<b.length&&f.forEach(b,a.hitch(this,function(b){var k=b.attributes;k&&f.forEach(e,a.hitch(this,function(b){var a=k[b];"number"===typeof a&&c[b].push(a)}))}));f.forEach(e,a.hitch(this,function(b){this.floatNumberFieldDecimalPlace[b]=0;var a=c[b];if(0<a.length)try{var e=this._getBestDecimalPlace(a);this.floatNumberFieldDecimalPlace[b]=e}catch(H){this.floatNumberFieldDecimalPlace[b]=0,console.error(H)}this.popupFieldInfosObj&&(a=this.popupFieldInfosObj[b])&&a.format&&0<=a.format.places&&(this.floatNumberFieldDecimalPlace[b]=
a.format.places)}))},_onDocumentBodyClick:function(b){if(0<=this.currentChartIndex&&this.tooltipDialogs){var a=this.tooltipDialogs[this.currentChartIndex];if(a){var e=!!a.isOpendNow;this._hideAllTooltipDialogs();var c=b.target||b.srcElement;c===this.leftArrow||c===this.rightArrow||d.hasClass(c,"paging-a")||d.hasClass(c,"paging-li")||(c===this.settingsIcon?e?this._hideTooltipDialog(a):this._showTooltipDialog(a):(b=c===a.domNode,c=d.isDescendant(c,a.domNode),b||c?e?this._showTooltipDialog(a):this._hideTooltipDialog(a):
this._hideTooltipDialog(a)))}else this._hideAllTooltipDialogs()}else this._hideAllTooltipDialogs()},clear:function(){this.featureLayer=this.features=this.config=null;this.chartTitle.innerHTML="";this.chartTitle.title="";this.currentChartIndex=-1;this.popupFieldInfosObj=this.floatNumberFieldDecimalPlace=null;g("li",this.pagingUl).removeClass("selected");this.charts||(this.charts=[]);this.paramsDijits||(this.paramsDijits=[]);this.tooltipDialogs||(this.tooltipDialogs=[]);for(var b=0;b<this.charts.length;b++)this.charts[b]&&
this.charts[b].destroy(),this.charts[b]=null,this.paramsDijits[b]&&this.paramsDijits[b].destroy(),this.paramsDijits[b]=null,this.tooltipDialogs[b]&&this.tooltipDialogs[b].destroy(),this.tooltipDialogs[b]=null;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];d.empty(this.pagingUl);d.empty(this.chartContainer);d.addClass(this.domNode,this.noMoreThanOneChartClassName)},_showChart:function(b){this.currentChartIndex=-1;var a=g(".chart-div",this.chartContainer);a.style({display:"none"});var e=
g("li",this.pagingUl);e.removeClass("selected");if(!(0>b)){if(a=a[b])this.currentChartIndex=b,d.setStyle(a,"display","block");(e=e[b])&&d.addClass(e,"selected");if(!this.isBigPreview&&(e=null,this.charts&&0<this.charts.length&&(e=this.charts[b]))){b=this._calculateChartBox();var c=d.getContentBox(a);if(b.w!==c.w||b.h!==c.h)this.loading.show(),c=b.w+"px",b=b.h+"px",d.setStyle(a,"width",c),d.setStyle(a,"height",b),e.resize(c,b),this.loading.hide()}}},_hideAllTooltipDialogs:function(){this.tooltipDialogs&&
0<this.tooltipDialogs.length&&f.forEach(this.tooltipDialogs,a.hitch(this,function(b){this._hideTooltipDialog(b)}))},_hideTooltipDialog:function(b){b&&(r.close(b),b.isOpendNow=!1)},_showTooltipDialog:function(b){b&&(r.open({popup:b,around:this.settingsIcon}),b.isOpendNow=!0)},_onPagingUlClicked:function(b){b.stopPropagation();this._hideAllTooltipDialogs();b=b.target||b.srcElement;if("a"===b.tagName.toLowerCase()){var a=g("a",this.pagingUl);b=f.indexOf(a,b);0<=b&&this._showChart(b)}},_onLeftArrowClicked:function(b){b.stopPropagation();
this._hideAllTooltipDialogs();b=(this.currentChartIndex-1+this.charts.length)%this.charts.length;0<=b&&this._showChart(b)},_onRightArrowClicked:function(b){b.stopPropagation();this._hideAllTooltipDialogs();b=(this.currentChartIndex+1+this.charts.length)%this.charts.length;0<=b&&this._showChart(b)},_getHighLightMarkerSymbol:function(){var b=z.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",
style:"esriSLSSolid"}});b.setSize(30);b.outline.setColor(new m(this.config.highLightColor));return b},_getHighLightLineSymbol:function(){var b=z.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});b.setColor(new m(this.config.highLightColor));return b},_getHighLightFillSymbol:function(){var b=z.fromJson({color:[255,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});b.outline.setColor(new m(this.config.highLightColor));
return b},_zoomToGraphics:function(b){if(this.map&&this.featureLayer&&this.featureLayer.visible&&b&&0<b.length){var e=null;try{var c=f.filter(b,function(b){return!!b.geometry});0<c.length&&(e=D.graphicsExtent(c))}catch(G){console.error(G)}if(e)this.map.setExtent(e.expand(1.4));else if(b=(b=b[0])&&b.geometry)e=a.hitch(this,function(b){var e=this.map.getNumLevels(),c=this.map.getLevel();this.map.setLevel(Math.max(c,Math.floor(2*e/3))).then(a.hitch(this,function(){this.map.centerAt(b)}))}),"point"===
b.type?e(b):"multipoint"===b.type&&1===b.points.length&&e(b.getPoint(0))}},_removeTempGraphics:function(){if(this.featureLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,1);this.tempGraphics=null},_mouseOverChartItem:function(b){this._removeTempGraphics();if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var e=u.getTypeByGeometryType(this.featureLayer.geometryType),
c=null;if("point"===e)c=this._getHighLightMarkerSymbol(),this.tempGraphics=[],f.forEach(b,a.hitch(this,function(b){b=new v(b.geometry,c);this.tempGraphics.push(b);this.featureLayer.add(b)}));else if("polyline"===e||"polygon"===e)c="polyline"===e?this._getHighLightLineSymbol():this._getHighLightFillSymbol(),f.forEach(b,a.hitch(this,function(b){b.setSymbol(c)})),this.features.length!==b.length&&"polygon"===e&&(f.forEach(b,a.hitch(this,function(b){this.featureLayer.remove(b)})),f.forEach(b,a.hitch(this,
function(b){this.featureLayer.add(b)})))}},_mouseOutChartItem:function(){this._removeTempGraphics();this.featureLayer&&f.forEach(this.featureLayer.graphics,a.hitch(this,function(b){b.setSymbol(null)}))},_isNumber:function(b){return"[object number]"===Object.prototype.toString.call(b).toLowerCase()},_tryLocaleNumber:function(b,e){var c=b;if(y.isDefined(b)&&isFinite(b))try{var k;if(e&&this._isNumberField(e)){var d=this.popupFieldInfosObj[e];k=d&&a.exists("format.places",d)?u.localizeNumberByFieldInfo(b,
d):u.localizeNumber(b)}else k=b;"string"===typeof k&&(c=k)}catch(A){console.error(A)}return c+""},_getBestDisplayValue:function(b,e){var c=this._tryLocaleNumber(e,b);if(this.featureLayer.typeIdField===b){var k=this.featureLayer.types;if(k&&0<k.length&&(k=f.filter(k,a.hitch(this,function(b){return b.id===e})),0<k.length))return c=k[0].name}(k=this._getFieldInfo(b))&&k.domain&&(k=k.domain.codedValues)&&0<k.length&&f.some(k,function(b){return b.code===e?(c=b.name,!0):!1});return c},_getFieldAliasArray:function(b){return f.map(b,
a.hitch(this,function(b){return this._getFieldAlias(b)}))},_getFieldAlias:function(b){var a=b;(b=this._getFieldInfo(b))&&(a=b.alias||a);return a},_getFieldInfo:function(b){if(this.featureLayer)for(var a=this.featureLayer.fields,e=0;e<a.length;e++)if(a[e].name===b)return a[e];return null},_isNumberField:function(b){var e=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return f.some(this.featureLayer.fields,a.hitch(this,function(a){return a.name===b&&
0<=e.indexOf(a.type)}))},_isFloatNumberField:function(b){var e=["esriFieldTypeSingle","esriFieldTypeDouble"];return f.some(this.featureLayer.fields,a.hitch(this,function(a){return a.name===b&&0<=e.indexOf(a.type)}))},_isDateField:function(b){return(b=this._getFieldInfo(b))?"esriFieldTypeDate"===b.type:!1},_getBestDecimalPlace:function(b){var a=0,e={};f.forEach(b,function(b){b=b.toString().split(".");var a=null;1===b.length?a=0:2===b.length&&(a=b[1].length);null!==a&&(e[a]=void 0===e[a]?1:e[a]+1)});
b=null;for(var c in e){c=parseInt(c,10);var k=e[c];b?k>b.value&&(b={key:c,value:k}):b={key:c,value:k}}b&&(a=parseInt(b.key,10));return a},_getFloatNumberFieldDecimalPlace:function(b){var a=0;this.floatNumberFieldDecimalPlace&&(b=this.floatNumberFieldDecimalPlace[b],"number"===typeof b&&(a=b));return a},_getBestValueForFloatNumberField:function(b,a){var e=this._getFloatNumberFieldDecimalPlace(a),e=b.toFixed(e);return parseFloat(e)},_getColors:function(b,e){var c=[],k=a.clone(b);if(2===k.colors.length)c=
this._createGradientColors(k.colors[0],k.colors[k.colors.length-1],e);else{for(var d=Math.ceil(e/k.colors.length),g=0;g<d;g++)c=c.concat(k.colors);c=c.slice(0,e)}return c},_createGradientColors:function(b,a,e){var c=[];b=new m(b);var k=new m(a);a=(k.r-b.r)/e;for(var d=(k.g-b.g)/e,k=(k.b-b.b)/e,g=new m,l=0,q=0,f=0,h=0;h<e;h++)l=parseInt(b.r+a*h,10),q=parseInt(b.g+d*h,10),f=parseInt(b.b+k*h,10),g.setColor([l,q,f]),c.push(g.toHex());return c},_createParamsDijit:function(b,a){return new F({isInWidget:this.map?
!0:!1,type:b,config:a})},_createJimuChart:function(b,e,c,k,d){var g=d.type,m=this._createParamsDijit(g,d.display),l=m.getConfig();l&&a.mixin(d.display,l);var q=this._getBasicChartOptionsByStatisticsInfo(e,c,k,g);this._udpateJimuChartDisplayOptions(q,d);var h=new E({chartDom:b,config:q});h.placeAt(b);this._bindChartEvent(h,e,k);this.showSettingIcon&&this.own(p(m,"change",a.hitch(this,function(){m.showShelter();if(h){var b=m.getConfig();a.mixin(d.display,b);this._udpateJimuChartDisplayOptions(q,d);
h.setConfig(q)}m.hideShelter()})));return[h,m]},_udpateJimuChartDisplayOptions:function(b,e){var c=e.type,k=e.display,d={type:c,dataZoom:["inside","slider"],confine:!0,backgroundColor:k.backgroundColor,color:k.colors,legend:k.showLegend,theme:this.theme||"light",advanceOption:function(b){k.showLegend&&b.legend&&(b.legend.textStyle||(b.legend.textStyle={}),b.legend.textStyle.color=k.legendTextColor);"pie"===c?b.series&&0<b.series.length&&f.forEach(b.series,a.hitch(this,function(b){"pie"===b.type&&
(b.label||(b.label={}),b.label.normal||(b.label.normal={}),b.label.normal.show=k.showDataLabel,b.label.normal.textStyle||(b.label.normal.textStyle={}),b.label.normal.textStyle.color=k.dataLabelColor)})):(b.xAxis||(b.xAxis={}),b.xAxis.axisLabel||(b.xAxis.axisLabel={}),b.xAxis.axisLabel.textStyle||(b.xAxis.axisLabel.textStyle={}),b.xAxis.axisLabel.textStyle.color=k.horizontalAxisTextColor,b.yAxis||(b.yAxis={}),b.yAxis.axisLabel||(b.yAxis.axisLabel={}),b.yAxis.axisLabel.textStyle||(b.yAxis.axisLabel.textStyle=
{}),b.yAxis.axisLabel.textStyle.color=k.verticalAxisTextColor)}};"pie"===c&&(d.labelLine=!!k.showDataLabel);a.mixin(b,d);"pie"!==c&&(b.axisPointer=!1,b.scale=!1,b.hidexAxis=!k.showHorizontalAxis,b.hideyAxis=!k.showVerticalAxis);return b},_getBasicChartOptionsByStatisticsInfo:function(b,a,e,c){return"feature"===b||"category"===b?this._getCategoryModeChartOptionsByStatisticsInfo(a,e,c):"count"===b?this._getCountModeChartOptionsByStatisticsInfo(a,e,c):"field"===b?this._getFieldModeChartOptionByStatisticsInfo(a,
e,c):null},_bindChartEvent:function(b,e,c){if(this.map){var k=a.hitch(this,function(b){if("series"===b.componentType){var a=null;(a="field"===e?this.features:c[b.dataIndex].dataFeatures)&&("mouseover"===b.type?this._mouseOverChartItem(a):"mouseout"===b.type?this._mouseOutChartItem(a):"click"===b.type&&this.zoomToFeaturesWhenClick&&this._zoomToGraphics(a))}}),d=[{name:"mouseover",callback:k},{name:"mouseout",callback:k}];this.zoomToFeaturesWhenClick&&d.push({name:"click",callback:k});f.forEach(d,a.hitch(this,
function(a){b.chart.on(a.name,a.callback)}))}},_createFeatureModeCharts:function(b,e){var c=[],k=[],d=b.config,g={layerDefinition:this.featureLayer,features:b.features,labelField:d.labelField,valueFields:d.valueFields,sortOrder:d.sortOrder},m=w.getFeatureModeStatisticsInfo(g);f.forEach(d.types,a.hitch(this,function(b,a){try{var d=this._createJimuChart(e[a],"feature",g,m,b);c.push(d[0]);k.push(d[1])}catch(t){console.error(t)}}));return{charts:c,paramsDijits:k}},_createCategoryModeCharts:function(b,
e){var c=[],k=[],d=b.config,g={layerDefinition:this.featureLayer,features:b.features,categoryField:d.categoryField,valueFields:d.valueFields,operation:b.config.operation,sortOrder:d.sortOrder},m=w.getCategoryModeStatisticsInfo(g);f.forEach(d.types,a.hitch(this,function(b,a){try{var d=this._createJimuChart(e[a],"category",g,m,b);c.push(d[0]);k.push(d[1])}catch(t){console.error(t)}}));return{charts:c,paramsDijits:k}},_getCategoryModeChartOptionsByStatisticsInfo:function(b,e,c){var k={type:c,labels:[],
series:[]},d=this._getFieldAliasArray(b.valueFields),g=b.labelField||b.categoryField;k.series=f.map(d,a.hitch(this,function(b){return{name:b,type:c,data:[]}}));f.forEach(e,a.hitch(this,function(b){var a=this._getBestDisplayValue(g,b.category);k.labels.push(a);for(a=0;a<b.valueFields.length;a++)k.series[a].data.push(b.valueFields[a])}));return k},_createCountModeCharts:function(b,e){var c=[],k=[],d=b.config,g={layerDefinition:this.featureLayer,features:b.features,categoryField:d.categoryField,sortOrder:d.sortOrder},
m=w.getCountModeStatisticsInfo(g);f.forEach(d.types,a.hitch(this,function(b,a){try{var d=this._createJimuChart(e[a],"count",g,m,b);c.push(d[0]);k.push(d[1])}catch(t){console.error(t)}}));return{charts:c,paramsDijits:k}},_getCountModeChartOptionsByStatisticsInfo:function(b,e,c){var k={type:c,labels:[],series:[{name:this._legendNls||"Legend",type:c,data:[]}]},d=b.categoryField;f.forEach(e,a.hitch(this,function(b){var a=b.count;b=this._getBestDisplayValue(d,b.fieldValue);k.labels.push(b);k.series[0].data.push(a)}));
return k},_createFieldModeCharts:function(b,e){var c=[],k=[],d=b.config,g={layerDefinition:this.featureLayer,features:b.features,valueFields:d.valueFields,operation:d.operation},m=w.getFieldModeStatisticsInfo(g);f.forEach(d.types,a.hitch(this,function(b,a){try{var d=this._createJimuChart(e[a],"field",g,m,b);c.push(d[0]);k.push(d[1])}catch(t){console.error(t)}}));return{charts:c,paramsDijits:k}},_getFieldModeChartOptionByStatisticsInfo:function(b,e,c){var k={type:c,labels:[],series:[{name:this._legendNls||
"Legend",type:c,data:[]}]};b=b.valueFields;var d=this._getFieldAliasArray(b);f.forEach(b,a.hitch(this,function(b,a){var c=e[b];k.labels.push(d[a]);k.series[0].data.push(c)}));return k}})})},"jimu/clientStatisticsUtils":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","jimu/utils","esri/lang"],function(p,h,n,c,a){var f=p(null,{popupFieldInfosObj:null,constructor:function(a){a&&n.mixin(this,a);this.popupFieldInfosObj={};this.floatNumberFieldDecimalPlace={}},_isNumber:function(a){return"[object number]"===
Object.prototype.toString.call(a).toLowerCase()},_tryLocaleNumber:function(d,g){var m=d;if(a.isDefined(d)&&isFinite(d))try{var h;if(g&&this._isNumberField(g)){var l=this.popupFieldInfosObj[g];h=l&&n.exists("format.places",l)?c.localizeNumberByFieldInfo(d,l):c.localizeNumber(d)}else h=d;"string"===typeof h&&(m=h)}catch(b){console.error(b)}return m+""},_getBestDisplayValue:function(a,c){var d=this._tryLocaleNumber(c,a);if(this.layerDefinition.typeIdField===a){var g=this.layerDefinition.types;if(g&&
0<g.length&&(g=h.filter(g,n.hitch(this,function(a){return a.id===c})),0<g.length))return d=g[0].name}(g=this._getFieldInfo(a))&&g.domain&&(g=g.domain.codedValues)&&0<g.length&&h.some(g,function(a){return a.code===c?(d=a.name,!0):!1});return d},_getFieldAliasArray:function(a){return h.map(a,n.hitch(this,function(a){return this._getFieldAlias(a)}))},_getFieldAlias:function(a){var c=a;(a=this._getFieldInfo(a))&&(c=a.alias||c);return c},_getFieldInfo:function(a){if(this.layerDefinition)for(var c=this.layerDefinition.fields,
d=0;d<c.length;d++)if(c[d].name===a)return c[d];return null},_isNumberField:function(a){var c=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return h.some(this.layerDefinition.fields,n.hitch(this,function(d){return d.name===a&&0<=c.indexOf(d.type)}))},_isFloatNumberField:function(a){var c=["esriFieldTypeSingle","esriFieldTypeDouble"];return h.some(this.layerDefinition.fields,n.hitch(this,function(d){return d.name===a&&0<=c.indexOf(d.type)}))},_isDateField:function(a){return(a=
this._getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},_getBestDecimalPlace:function(a){var c=0,d={};h.forEach(a,function(b){b=b.toString().split(".");var a=null;1===b.length?a=0:2===b.length&&(a=b[1].length);null!==a&&(d[a]=void 0===d[a]?1:d[a]+1)});a=null;for(var f in d){f=parseInt(f,10);var l=d[f];a?l>a.value&&(a={key:f,value:l}):a={key:f,value:l}}a&&(c=parseInt(a.key,10));return c},_getFloatNumberFieldDecimalPlace:function(a){var c=0;this.floatNumberFieldDecimalPlace&&(a=this.floatNumberFieldDecimalPlace[a],
"number"===typeof a&&(c=a));return c},_getBestValueForFloatNumberField:function(a,c){var d=this._getFloatNumberFieldDecimalPlace(c),d=a.toFixed(d);return parseFloat(d)},getFeatureModeStatisticsInfo:function(a){var d=a.labelField,m=a.valueFields,f="des"!==a.sortOrder,l=[],l=h.map(a.features,n.hitch(this,function(b){var a=b.attributes;b={category:a[d],valueFields:[],dataFeatures:[b]};b.valueFields=h.map(m,n.hitch(this,function(b){return a[b]}));return b}));f?l.sort(function(b,a){return b.category<a.category?
-1:b.category>a.category?1:0}):l.sort(function(b,a){return b.category<a.category?1:b.category>a.category?-1:0});this._isDateField(d)&&0<l.length&&h.map(l,n.hitch(this,function(b){var a=b.category;"number"===typeof a&&0<a&&(b.category=c.localizeDate(new Date(a)))}));return l},getCategoryModeStatisticsInfo:function(d){var g=d.categoryField,m=d.valueFields,f=d.operation,l="des"!==d.sortOrder,b=[],e={};h.forEach(d.features,n.hitch(this,function(b){var a=b.attributes[g],c=null;e.hasOwnProperty(a)?(c=e[a],
c.dataFeatures.push(b)):(c={dataFeatures:[b]},e[a]=c)}));var k=null,q;for(q in e)k=e[q],this._isNumberField(g)&&a.isDefined(q)&&(q=parseFloat(q)),k.valueFields=h.map(m,n.hitch(this,function(b){var a=h.map(k.dataFeatures,n.hitch(this,function(a){return a.attributes[b]})),c=0;"max"===f?c=-Infinity:"min"===f&&(c=Infinity);var e=0;h.forEach(a,n.hitch(this,function(b){this._isNumber(b)&&(e++,"average"===f||"sum"===f?c+=b:"max"===f?c=Math.max(c,b):"min"===f&&(c=Math.min(c,b)))}));0<e?"average"===f&&(c/=
e):c=0;return c})),b.push({category:q,valueFields:k.valueFields,dataFeatures:k.dataFeatures});l?b.sort(function(b,a){return b.category<a.category?-1:b.category>a.category?1:0}):b.sort(function(b,a){return b.category<a.category?1:b.category>a.category?-1:0});this._isDateField(g)&&0<b.length&&h.map(b,n.hitch(this,function(b){var a=b.category;a&&0<parseInt(a,10)&&(b.category=c.localizeDate(new Date))}));b=h.filter(b,n.hitch(this,function(b){var a=!1;b=b.category;"number"===typeof b&&(a=isNaN(b));return!a}));
"sum"!==f&&"average"!==f||h.forEach(b,n.hitch(this,function(b){h.forEach(m,n.hitch(this,function(a,c){if(this._isFloatNumberField(a)){var e=b.valueFields[c],e=this._getBestValueForFloatNumberField(e,a);b.valueFields[c]=e}}))}));return b},getCountModeStatisticsInfo:function(a){var d=a.categoryField,m="des"!==a.sortOrder,f={};h.forEach(a.features,n.hitch(this,function(b){var a=b.attributes[d],c=null;f.hasOwnProperty(a)?(c=f[a],c.count++,c.dataFeatures.push(b)):(c={count:1,dataFeatures:[b]},f[a]=c)}));
a=[];var l=null,b;for(b in f)l=f[b],this._isNumberField(d)&&(b=parseFloat(b)),a.push({fieldValue:b,count:l.count,dataFeatures:l.dataFeatures});m?a.sort(function(b,a){return b.fieldValue<a.fieldValue?-1:b.fieldValue>a.fieldValue?1:0}):a.sort(function(b,a){return b.fieldValue<a.fieldValue?1:b.fieldValue>a.fieldValue?-1:0});this._isDateField(d)&&0<a.length&&h.forEach(a,n.hitch(this,function(b){if(b.fieldValue){var a=parseInt(b.fieldValue,10);0<a&&(b.fieldValue=c.localizeDate(new Date(a)))}}));return a},
getFieldModeStatisticsInfo:function(a){var c=a.valueFields,d=a.operation,f=h.map(a.features,n.hitch(this,function(b){return b.attributes})),l={};h.forEach(c,n.hitch(this,function(b){l[b]=0;"max"===d?l[b]=-Infinity:"min"===d&&(l[b]=Infinity);var a=0;h.forEach(f,n.hitch(this,function(c){c=c[b];this._isNumber(c)&&(a++,l.hasOwnProperty(b)?"average"===d||"sum"===d?l[b]+=c:"max"===d?l[b]=Math.max(l[b],c):"min"===d&&(l[b]=Math.min(l[b],c)):l[b]=c)}));0<a?"average"===d&&(l[b]/=a):l[b]=0}));"sum"!==d&&"average"!==
d||h.forEach(c,n.hitch(this,function(b){l.hasOwnProperty(b)&&this._isFloatNumberField(b)&&(l[b]=this._getBestValueForFloatNumberField(l[b],b))}));return l}});return{getFeatureModeStatisticsInfo:function(a){return(new f({layerDefinition:a.layerDefinition})).getFeatureModeStatisticsInfo(a)},getCategoryModeStatisticsInfo:function(a){return(new f({layerDefinition:a.layerDefinition})).getCategoryModeStatisticsInfo(a)},getCountModeStatisticsInfo:function(a){return(new f({layerDefinition:a.layerDefinition})).getCountModeStatisticsInfo(a)},
getFieldModeStatisticsInfo:function(a){return(new f({layerDefinition:a.layerDefinition})).getFieldModeStatisticsInfo(a)}}})},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/dom-style dojo/dom-geometry dojo/Evented esri/lang libs/echarts/echarts jimu/utils ./_Gauge dojo/_base/config libs/echarts/light libs/echarts/dark".split(" "),function(p,h,n,c,a,f,d,g,m,r,l){return p([h,f],{baseClass:"jimu-dijit-chart",templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",
config:null,validConfig:{type:"column bar line pie radar funnel gauge".split(" "),common:"type title labels legend confine toolbox color theme backgroundColor scale dataZoom events series advanceOption".split(" "),axisChart:["stack","axisPointer","hidexAxis","hideyAxis"],pie:["innerRadius","labelLine"],funnel:["min","max","funnelSort"],gauge:["shape","min","max","gaugeOption"],radar:["radarShape","indicator"]},defaultConfiguration:{series:{pieSeries:[{type:"pie",radius:[0,"70%"],labelLine:{normal:{show:!0,
length:5,length2:5}},data:[]}],funnelSeries:[{type:"funnel",minSize:"0%",maxSize:"100%",sort:"descending",data:[]}]},toolboxs:{dataView:{title:"Data view",readOnly:!1},magicType:{title:{line:"switch to line",bar:"switch to bar",stack:"switch to stack",tiled:"switch to tiled"},type:["line","bar","stack","tiled"]},restore:{title:"restore"},saveAsImage:{title:"save as image"}}},postCreate:function(){this.inherited(arguments);if(this.chartDom){var b=a.getMarginBox(this.chartDom);0===b.w&&(b.w=10);0===
b.h&&(b.h=10);c.set(this.domNode,{width:b.w+"px",height:b.h+"px"})}else console.warn("No valid chart dom!"),c.set(this.domNode,{width:"10px",height:"10px"});this.gauge=new r;this.chart=g.init(this.domNode,this.config.theme||"light");this.gauge.setChart(this.chart);this.gauge.setRTL(this._isRTL());this.setConfig()},updateConfig:function(b){return m.isNotEmptyObject(b)?(n.mixin(this.config,b),b=this._chartFactory(this.config),this.chart.setOption(b),this.config.shape&&"curved"!==this.config.shape&&
this.gauge._resetGraphic(this.config),!0):!1},setConfig:function(b){m.isNotEmptyObject(b)?this.config=b:this.config=this.config||{};if(!this._checkConfig(this.config))return!1;this._customTheme();this.clear();this.chart.setOption(this._chartFactory(this.config),!0);this._resize();return!0},_chartFactory:function(b){b=n.clone(b);var a=n.clone(this.defaultConfiguration),c=this.option={},c=this._settingDefaultGrid(c,b),c=this._settingRenderOption(c,b),c=this._settingTitle(c,b),c=this._settingBackgroundColor(c,
b),c=this._settingColor(c,b),c=this._settingToolTip(c,b);this._isAxisChart(b)?(c=this._settingAxisChartAxis(c,b),c=this._settingToolBox(c,b,a),c=this._settingSeries(c,b),c=this._settingStack(c,b),c=this._settingAxisDisplay(c,b)):this._isNoAxisChart(b)&&(c=this._settingToolBox(c,b,a,"magicType"),c=this._settingNoAxisCharts(c,b,a));c=this._settingLegend(c,b);c=this._settingScale(c,b);c=this._handleChartRtl(c,b);c=this._avoidTitleToolBoxOverlap(c,b);c=this._pieChartAvoidLegendLabelOverLap(c,b);c=this._settingAdvanceOption(c,
b);c=this._avoidAdjoiningColorSameForPie(c,b);this._bindEvents(b);return c},_avoidAdjoiningColorSameForPie:function(b,a){if("pie"!==a.type||!b.color||2>=b.color.length)return b;m.isNotEmptyObject(b.series,!0)&&b.series.forEach(n.hitch(this,function(a){var c=a.data.length;0===(c-1)%b.color.length&&(a=a.data[c-1],a.itemStyle||(a.itemStyle={}),a.itemStyle.normal||(a.itemStyle.normal={}),a.itemStyle.normal.color||(a.itemStyle.normal.color=b.color[1]))}));return b},_pieChartAvoidLegendLabelOverLap:function(b,
a){if("pie"!==a.type)return b;var c=a.labelLine?.75:.85,e=this.chart.getHeight(),e=parseInt(e/2,10);a.legend&&(c-=.12,b.series[0].center=["50%",e-20]);b.series[0].radius[1]=100*c+"%";return b},_settingDefaultGrid:function(b,a){this._isAxisChart(a)&&(b.grid={top:20,bottom:10,left:10,right:10,containLabel:!0});return b},_settingRenderOption:function(b,a){if("curved"===a.shape)return b.animationThreshold=99999,b.hoverLayerThreshold=99999,b.progressiveThreshold=99999,b;b.hoverLayerThreshold=1E3;b.progressiveThreshold=
1E3;b.progressive=100;b.animationThreshold=1E3;return b},clear:function(){this.chart.clear()},resize:function(b,a){c.set(this.domNode,{width:b||"100%",height:a||"100%"});b?"string"===typeof b&&(b=Number(b.replace("px",""))):b=this.domNode.clientWidth;this.chart.resize();this._resize(b)},_resize:function(b){this.chart.setOption(this._settingFixedPosition(b));this.config.shape&&"curved"!==this.config.shape&&(this.gauge._resetGrid(this.config),this.gauge._resetGraphic(this.config))},_settingFixedPosition:function(b){var a=
this.config,c=this.option;this._isAxisChart(a)&&(c=this._settingDataZoom(c,a,b),c=this._settingGrid(c,a));"pie"===a.type&&(c=this._pieChartAvoidLegendLabelOverLap(c,a));return c},destroy:function(){this.chart.clear();m.isNotEmptyObject(this.config.events)&&this.config.events.forEach(n.hitch(this,function(b){this.chart.off(b.name)}));this.inherited(arguments)},_settingAxisDisplay:function(b,a){if(!this._isAxisChart(a))return b;b.xAxis.show=!a.hidexAxis;b.yAxis.show=!a.hideyAxis;b.grid.containLabel=
!a.hideyAxis;return b},_handleChartRtl:function(b,a){if(!this._isRTL())return b;if(this._isAxisChart(a)||"vertical"===a.shape||"horizontal"===a.shape)b.xAxis.inverse=!0,b.yAxis.position="right";return b},_settingTitle:function(b,a){a.title&&(b.title={textStyle:{fontSize:16}},b.title.text=a.title);return b},_settingColor:function(b,a){m.isNotEmptyObject(a.color)&&(b.color=a.color);return b},_settingBackgroundColor:function(b,a){a.backgroundColor&&(b.backgroundColor=a.backgroundColor);return b},_settingToolTip:function(b,
a){b.tooltip={};if(a.axisPointer){if(b.tooltip.trigger="axis","column"===a.type||"bar"===a.type)b.tooltip.axisPointer={type:"shadow"}}else b.tooltip.axisPointer={type:""};return b},_settingAxisChartAxis:function(b,a){b.xAxis={};b.yAxis={};"column"===a.type||"line"===a.type&&a.labels?(b.xAxis.data=a.labels,b.xAxis.type="category"):"bar"===a.type&&a.labels&&(b.yAxis.data=a.labels,b.yAxis.type="category");return b},_settingToolBox:function(b,a,c,d){b.toolbox={};d||(d="");m.isNotEmptyObject(a.toolbox)&&
(b.toolbox.feature={},a.toolbox.forEach(function(e){e!==d&&(a.stack&&(c.toolboxs.magicType.type=["line","bar","stack","tiled"]),b.toolbox.feature[e]=c.toolboxs[e])}));return b=this._handleToolBoxRTL(b,a)},_settingSeries:function(b,a){if(m.isNotEmptyObject(a.series))m.isNotEmptyObject(b.series)||(b.series=a.series);else return console.log("No series!"),b;a.series.forEach(n.hitch(this,function(c,e){var d="",d=c.type?c.type:a.type;c.data=c.data.map(n.hitch(this,function(b,c){if(this._isNoAxisChart(a)){var e=
{};e.value=b;e.name=a.labels[c]||"";return e}return b}));b.series[e].name=c.name||"";b.series[e].type="column"===d?"bar":d;b.series[e].data=c.data}));return b},_settingNoAxisCharts:function(b,a,c){if("pie"===a.type)b=this._settingPie(b,a,c);else if("funnel"===a.type)b=this._settingFunnel(b,a,c);else if("radar"===a.type)b=this._settingRadar(b,a);else if("gauge"===a.type)return this.gauge._settingGaugeSeries(b,a);return this._settingSeries(b,a)},_settingScale:function(b,a){if(!a.scale)return b;"bar"===
a.type?b.xAxis.scale=!0:"line"===a.type||"column"===a.type?b.yAxis.scale=!0:"radar"===a.type&&(b.radar.scale=!0);return b},_settingAdvanceOption:function(b,a){a.advanceOption&&("object"===typeof a.advanceOption?n.mixin(b,a.advanceOption):"function"===typeof a.advanceOption&&a.advanceOption(b));return b},_bindEvents:function(b){m.isNotEmptyObject(b.events)&&b.events.forEach(n.hitch(this,function(b){this.chart.on(b.name,b.callback)}))},_settingLegend:function(b,a){if(!a.legend)return b;b.legend={orient:"horizontal",
x:"left",height:20,y:"bottom",data:[]};this._isAxisChart(a)||"gauge"===a.type?b.series.forEach(function(a){b.legend.data.push(a.name)}):"pie"!==a.type&&"funnel"!==a.type&&"radar"!==a.type||b.series[0].data.forEach(function(a){b.legend.data.push(a.name)});return b=this._handleLegendRTL(b,a)},_handleDataZoomStyle:function(b,a){a.showDataShadow=!1;a.realtime=!1;a.bottom=b.legend?30:"auto";return a},_showDataZoom:function(b,a,c){c=c||this.chart.getWidth();var e=a.series[0].data.length*a.series.length,
d=this._isRTL(),k=this._getaxisZeroPosition(a);c="bar"!==a.type?d?k.left:c-k.left-b.grid.right:k.top;this.showDataZoom=8>c/e;var g=c/(8*e),g=parseFloat(100*g,10).toFixed(3),g=100<g?100:g,g=0===g?.1:g;c=[];var l="bar"===a.type?"xAxis":"yAxis",m="bar"===a.type?"yAxisIndex":"xAxisIndex",f="bar"===a.type?"width":"height";b=this._initAxisOfDataZoom(b,l);c=a.dataZoom.map(n.hitch(this,function(b){b={type:b,start:0,show:this.showDataZoom};b[m]=[0];b[f]=15;b.end=g;"xAxis"===l&&this._isRTL()&&(b.left="10");
return b=this._handleDataZoomStyle(a,b)}));b.dataZoom=c;return b},_settingDataZoom:function(b,a,c){if(!m.isNotEmptyObject(a.dataZoom))return{dataZoom:[]};a.dataZoom?b=this._showDataZoom(b,a,c):(this.showDataZoom=!1,b.dataZoom=[]);return b},_avoidTitleToolBoxOverlap:function(b,a){if("gauge"===a.type)return b;var c=10;a.title&&(c+=20);m.isNotEmptyObject(a.toolbox,!0)&&(c+=20);m.isNotEmptyObject(a.toolbox,!0)&&a.title&&(b.toolbox.top=20);this._isAxisChart(a)&&b.grid&&(b.grid.top=c);return b},_settingGrid:function(b,
a){if(!this._isAxisChart(a))return b;var c=10;a.title&&(c+=20);m.isNotEmptyObject(a.toolbox,!0)&&(c+=20);m.isNotEmptyObject(a.toolbox,!0)&&a.title&&(b.toolbox.top=20);b.grid&&(b.grid.top=c);var c=10,e=43;a.hideyAxis&&(c=20,e=63);var d=this._isRTL(),g=0,l=10;a.legend&&(g=10,l+=20);"bar"===a.type?(d?b.grid.left=this.showDataZoom?30:10:b.grid.right=this.showDataZoom?30:10,b.grid.bottom=l):b.grid.bottom=this.showDataZoom?e+g:c+g;return b},_handleLegendRTL:function(b,a){if(!a.legend)return b;var c={};
this._isRTL()?c.x="right":c.x="left";b.legend=n.mixin(b.legend,c);return b},_handleToolBoxRTL:function(b,a){if(!a.toolbox)return b;var c={top:0};this._isRTL()?c.right=0:c.left=0;b.toolbox=n.mixin(b.toolbox,c);return b},_initAxisOfDataZoom:function(b,a){b[a].type="value";b.xAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};b.yAxis.splitLine={show:!0,lineStyle:{type:"dashed"}};return b},_isRTL:function(){return"ar"===l.locale||"he"===l.locale},_settingStack:function(b,a){if(!this._isAxisChart(a))return b;
b.series=b.series.map(function(b){a.stack&&(b.stack="stack","line"===a.type&&(b.areaStyle={normal:{}},b.smooth=!0));return b});return b},_settingPie:function(b,a,c){if("pie"!==a.type)return b;b.series=c.series.pieSeries;a.innerRadius&&(b.series[0].radius[0]=a.innerRadius);b.series[0].labelLine.normal.show="undefined"===typeof a.labelLine?!0:a.labelLine;return b},_settingFunnel:function(b,a,c){if("funnel"!==a.type)return b;b.series=c.series.funnelSeries;m.isNotEmptyObject(a.funnel)&&(b.series[0].min=
a.min||0,b.series[0].max=a.max||100,b.series[0].sort=a.funnelSort||"descending");return b},_settingRadar:function(b,a){var c=this;if("radar"!==a.type)return b;b.radar={nameGap:6,radius:"70%"};a.radarShape&&(b.radar.shape=a.radarShape);a.indicator?b.radar.indicator=a.indicator:console.error("No radar indicator");b.series=[{}];b.series[0].label={normal:{show:!0,formatter:function(b){return c._tryLocaleNumber(b.value)}}};var e=[];a.series[0].data.forEach(function(b,c){e[c]={tooltip:"\x3cspan\x3e"+a.labels[c]+
"\x3c/span\x3e"};b.forEach(function(b,d){e[c].tooltip+="\x3cbr/\x3e\x3cspan\x3e"+a.indicator[d].name+"\x3c/span\x3e : \x3cspan\x3e"+b+"\x3c/span\x3e"})});b.tooltip={trigger:"item",formatter:function(b){return'\x3cspan class\x3d"colorEl marginRight5" style\x3d"background-color:'+m.encodeHTML(b.color)+'"\x3e\x3c/span\x3e'+e[b.dataIndex].tooltip}};this.config.confine&&(b.tooltipconfine=!0);return b},_customTheme:function(){var b=this;m.isNotEmptyObject(this.chart._theme)||(this.chart._theme={});m.isNotEmptyObject(this.config.color)&&
(this.chart._theme.color=this.config.color);m.isNotEmptyObject(this.chart._theme.tooltip)||(this.chart._theme.tooltip={});this.config.confine&&(this.chart._theme.tooltip.confine=!0);this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(a){return"number"===typeof a.value?(a=parseFloat(a.value).toFixed(2),b._tryLocaleNumber(a)):a.value}},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}};this.chart._theme.tooltip.formatter=
function(b){function a(b){var a='\x3cdiv class\x3d"tooltip-tr"\x3e',e='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+m.encodeHTML(b.color)+'"\x3e\x3c/div\x3e',a=a+e;b.name&&"%00-"!==encodeURI(b.name)&&(a+="\x3cdiv\x3e"+b.name+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");a+="\x3cdiv\x3e"+c._tryLocaleNumber(b.value)+"\x3c/div\x3e";"pie"===b.seriesType&&(a+="\x3cdiv\x3e("+b.percent+"%)\x3c/div\x3e");return a+"\x3c/div\x3e"}var c=this;return function(b){var c='\x3cdiv class\x3d"tooltip-div"\x3e';
Array.isArray(b)?("%00-"!==encodeURI(b[0].seriesName)&&(c+='\x3cdiv class\x3d"tr"\x3e'+b[0].seriesName+"\x3c/div\x3e"),b.forEach(function(b){c+=a(b)})):("%00-"!==encodeURI(b.seriesName)&&(c+='\x3cdiv class\x3d"tr"\x3e'+b.seriesName+"\x3c/div\x3e"),c+=a(b));return c+="\x3c/div\x3e"}(b)}.bind(this);m.isNotEmptyObject(this.chart._theme.valueAxis)||(this.chart._theme.valueAxis={});m.isNotEmptyObject(this.chart._theme.valueAxis.axisLabel)||(this.chart._theme.valueAxis.axisLabel={});this.chart._theme.valueAxis.axisLabel.formatter=
function(b){return m.localizeNumber(b)}},_checkConfig:function(b){var a=!0;m.isNotEmptyObject(b)||(console.error("Empty config"),a=!1);if(!b.type||0>this.validConfig.type.indexOf(b.type))console.error("Invaild chart type!"),a=!1;var c=n.clone(this.validConfig),d=c.common,g=[],g="column"===b.type||"bar"===b.type||"line"===b.type?d.concat(c.axisChart):d.concat(c[b.type]);Object.keys(b).forEach(function(b){0>g.indexOf(b)&&(a=!1,console.error("Invalid configuration parameter: "+b))});return a},_tryLocaleNumber:function(b){var a=
b;if(d.isDefined(b)&&isFinite(b))try{var c=m.localizeNumber(b);"string"===typeof c&&(a=c)}catch(q){console.error(q)}return a+""},_getaxisZeroPosition:function(b){if(!this.chart)return!1;var a={},c=0,d=0;if((m.isNotEmptyObject(b.dataZoom,!0)||b.scale)&&b.series&&b.series[0]&&b.series[0].data){var g=b.series[0].data;m.isNotEmptyObject(g,!0)&&("bar"!==b.type?d=m.getMinOfArray(g):c=m.getMinOfArray(g))}if(b=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[c,d]))c=b[1]-5,a.left=b[0]-5,a.top=c;return m.isNotEmptyObject(a)?
a:!1},_isAxisChart:function(b){return"column"===b.type||"bar"===b.type||"line"===b.type},_isNoAxisChart:function(b){return"pie"===b.type||"funnel"===b.type||"radar"===b.type||"gauge"===b.type}})})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare","dojo/_base/lang","jimu/utils"],function(p,h,n){return p([],{curvedGaugeSeries:[{type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},axisTick:{show:!1},splitLine:{show:!1},
axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{normal:{}},detail:{offsetCenter:[0,"60%"],textStyle:{color:"24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500}],horizontalGauge:{grid:{top:"middle",height:90},xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",
fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",barWidth:30,label:{normal:{show:!0,position:"top",offset:[20,0],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],itemStyle:{normal:{color:"#24B5CC"}},
z:10}]},verticalGauge:{grid:{left:"middle",width:60},yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{normal:{color:"#E5E5E5"}},barGap:"-100%",data:[100],z:1},{type:"bar",barWidth:30,label:{normal:{show:!0,
position:"insideTopLeft",offset:[30,-15],textStyle:{}}},data:[{value:40,label:{normal:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}}},itemStyle:{normal:{}}}],itemStyle:{normal:{color:"#24B5CC"}},z:10}]},setChart:function(c){this.chart=c},setRTL:function(c){this._isRTL=c},_settingValueStyle:function(c,a){if(a.gaugeOption&&n.isNotEmptyObject(a.gaugeOption.valueStyle)){var f=a.gaugeOption.valueStyle,d=f.textStyle,f=f.formatter;"horizontal"===
a.shape||"vertical"===a.shape?(h.mixin(c.series[1].data[0].label.normal.textStyle,d),f&&(c.series[1].data[0].label.normal.formatter=f)):"curved"===a.shape&&(h.mixin(c.series[0].detail.textStyle,d),f&&(c.series[0].detail.formatter=f))}return c},_settingLabelColor:function(c,a){var f="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(f=a.gaugeOption.labelColor);"curved"===a.shape?c.series[0].axisLabel.textStyle.color=f:"horizontal"===a.shape?c.xAxis.axisLabel.textStyle.color=f:"vertical"===a.shape&&(c.yAxis.axisLabel.textStyle.color=
f);return c},_settingHorizontalGauge:function(c,a){h.mixin(c,h.clone(this.horizontalGauge));c.grid={top:"middle",height:90,left:"10%",right:"10%"};a.min="undefined"!==typeof a.min&&a.min?a.min:0;a.max="undefined"!==typeof a.max&&a.max?a.max:100;c.xAxis.max=a.max;c.xAxis.min=a.min;c.xAxis.scale=!0;c.series[0].data[0]=a.max;c=this._handleValue(c,a);a.labels&&a.labels[0]&&(c.series[1].data[0].name=a.labels[0]);c.series[1].name=a.series[0].name;c=this._settingNoCurvedGaugeColor(c,a);return c=this._handleHorizontalGaugeValueRTL(c,
a)},_handleHorizontalGaugeValueRTL:function(c,a){if(!this._isRTL||"horizontal"!==a.shape)return c;c.series[1].label.normal.offset=[-20,0];return c},_settingVerticalGauge:function(c,a){h.mixin(c,h.clone(this.verticalGauge));c.grid={left:"middle",width:60,top:"10%",bottom:"10%"};c.grid.left=this._getGridLeftOfVerticalGauge();a.min="undefined"!==typeof a.min&&a.min?a.min:0;a.max="undefined"!==typeof a.max&&a.max?a.max:100;c.yAxis.max=a.max;c.yAxis.min=a.min;c.series[0].data[0]=a.max;c=this._handleValue(c,
a);a.labels&&a.labels[0]&&(c.series[1].data[0].name=a.labels[0]);c.series[1].name=a.series[0].name;c=this._settingNoCurvedGaugeColor(c,a);return c=this._handleVerticalGaugeValueRTL(c,a)},_handleVerticalGaugeValueRTL:function(c,a){if(!this._isRTL||"vertical"!==a.shape)return c;var f=(a.series[0].data[0]+"").length-1;a.gaugeOption&&a.gaugeOption.valueStyle&&"undefined"!==typeof a.gaugeOption.valueStyle.decimalPlaces&&(f+=a.gaugeOption.valueStyle.decimalPlaces);c.series[1].label.normal.offset=[-17-9*
f,-15];return c},_handleValue:function(c,a){var f;a.series[0].data[0]<=a.max?f=a.series[0].data[0]:(f=a.max,c.series[1].data[0].label.normal.formatter=function(){return a.series[0].data[0]},c.tooltip.formatter=function(c){return'\x3cspan class\x3d"colorEl marginRight5" style\x3d"background-color:'+n.encodeHTML(c.color)+'"\x3e\x3c/span\x3e'+a.series[0].data[0]});c.series[1].data[0].value=f;return c},_settingCurvedGauge:function(c,a){c.series=h.clone(this.curvedGaugeSeries);a.min="undefined"!==typeof a.min&&
a.min?a.min:0;a.max="undefined"!==typeof a.max&&a.max?a.max:100;c.series[0].min=a.min;c.series[0].max=a.max;c.series[0].axisLine.lineStyle.color[0][0]=parseFloat(a.series[0].data[0]/a.max).toFixed(2);c.series[0].data[0].value=a.series[0].data[0];a.labels&&a.labels[0]&&(c.series[0].data[0].name=a.labels[0]);a.series[0].name&&(c.series[0].name=a.series[0].name);c.series[0].axisLine.lineStyle.width=30;return c=this._settingCurvedGaugeColor(c,a)},_settingGaugeSeries:function(c,a){if("gauge"!==a.type)return c;
"horizontal"===a.shape?c=this._settingHorizontalGauge(c,a):"vertical"===a.shape?c=this._settingVerticalGauge(c,a):"curved"===a.shape&&(c=this._settingCurvedGauge(c,a));c=this._settingGaugeLabel(c,a);c=this._settingLabelColor(c,a);return c=this._settingValueStyle(c,a)},_resetGraphic:function(c){c=this._settingGraphic(c);this._clearGraphic();this.chart.setOption({graphic:c});this.cacheGraphic=null;this.cacheGraphic=c},_clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(c){c.$action=
"remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},_resetGrid:function(c){c=this._settingGridLeftOfVerticalGauge(c);n.isNotEmptyObject(c)&&this.chart.setOption({grid:c})},_settingGridLeftOfVerticalGauge:function(c){return"gauge"!==c.type||"vertical"!==c.shape?{}:{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_settingCurvedGaugeColor:function(c,a){a.gaugeOption&&(a.gaugeOption.bgColor&&(c.series[0].axisLine.lineStyle.color[1][1]=a.gaugeOption.bgColor),a.gaugeOption.columnColor&&
(c.series[0].axisLine.lineStyle.color[0][1]=a.gaugeOption.columnColor));return c},_settingNoCurvedGaugeColor:function(c,a){a.gaugeOption&&(a.gaugeOption.bgColor&&(c.series[0].itemStyle.normal.color=a.gaugeOption.bgColor),a.gaugeOption.columnColor&&(c.series[1].data[0].itemStyle.normal.color=a.gaugeOption.columnColor));return c},_settingGraphic:function(c){var a=[];"gauge"===c.type&&c.gaugeOption&&("horizontal"===c.shape?a=this._settingHorizontalGraphic(c):"vertical"===c.shape&&(a=this._settingVerticalGraphic(c)));
return a},_settingHorizontalGraphic:function(c){var a="#000";c.gaugeOption&&c.gaugeOption.labelColor&&(a=c.gaugeOption.labelColor);var f=[],d=this.chart.convertToPixel({yAxisIndex:0},0),d=parseInt(d,10),d=Number(d)+16;this.cacheCriticalValues=h.clone(this.criticalValues);this.criticalValues.forEach(h.hitch(this,function(g){var m,h;"object"===typeof g?g.type&&(m=g.type,h=g.value):h=g;g=c.min||0;if(!(h>(c.max||100)||h<g)){g=this._getxAxisValueLeft(h);var l=6*(h.toString().length-2),b=g;0<l&&(b=g-l);
m||f.push({z:10,type:"image",$action:"merge",id:"wab_gid_image-"+n.getRandomString(),left:g,style:{image:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d",
width:10,height:10},silent:!0,top:d});f.push({z:10,type:"text",$action:"merge",id:"wab_gid_text-"+n.getRandomString(),left:b,style:{text:h,fill:a,font:"normal 11px sans-serif"},silent:!0,top:d+11})}}));return f},_settingVerticalGraphic:function(c){var a="#000";c.gaugeOption&&c.gaugeOption.labelColor&&(a=c.gaugeOption.labelColor);var f=[],d=this.chart.convertToPixel({xAxisIndex:0},0),d=parseFloat(d,10).toFixed(2),d=Number(d),g="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this._isRTL&&(d+=40,g="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+");
var m=d-26;this.cacheCriticalValues=h.clone(this.criticalValues);this.criticalValues.forEach(h.hitch(this,function(d){var l,b;"object"===typeof d?d.type&&(l=d.type,b=d.value):b=d;d=m;d=this._isRTL?m+11:m-11-6*(b.toString().length-1);var e=c.min||0;b>(c.max||100)||b<e||(e=this._getyAxisValueTop(b),e-=2,l||f.push({z:10,type:"image",$action:"merge",id:"wab_gid_image-"+n.getRandomString(),left:m,style:{image:g,width:10,height:10},silent:!0,top:e}),f.push({z:10,type:"text",$action:"merge",id:"wab_gid_text-"+
n.getRandomString(),left:d,style:{text:b,fill:a,font:"normal 11px sans-serif"},silent:!0,top:e-2}))}));return f},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(c){c=this.chart.convertToPixel({xAxisIndex:0},c);return parseFloat(c,10)-4},_getyAxisValueTop:function(c){c=this.chart.convertToPixel({yAxisIndex:0},c);return parseFloat(c,10)},_showSpecialLabel:function(c,a,f){var d=function(a){var c;f.forEach(function(d){"number"===typeof d&&0===d%1?
c=d===a?d:c:1>d-a&&0<=d-a&&(c=d)});return c};"curved"===a.shape?c.series[0].axisLabel.formatter=d:"horizontal"===a.shape?c.xAxis.axisLabel.formatter=d:"vertical"===a.shape&&(c.yAxis.axisLabel.formatter=d);return c},_settingGaugeLabel:function(c,a){var f=a.min||0,d=a.max||100,g=[];a.gaugeOption&&a.gaugeOption.showTargetValueLabel&&("curved"===a.shape&&(c.series[0].splitNumber=c.series[0].max,c.series[0].axisTick.splitNumber=1,c.series[0].axisTick.show=!1),a.gaugeOption.targetValue&&a.gaugeOption.targetValue.forEach(function(a){g.push(a)}));
this.criticalValues=h.clone(g);a.gaugeOption&&a.gaugeOption.showDataRangeLabel&&(0>g.indexOf(f)&&(g.push(f),this.criticalValues.push({type:"min",value:f})),0>g.indexOf(d)&&(g.push(d),this.criticalValues.push({type:"max",value:d})));return"curved"===a.shape?this._showSpecialLabel(c,a,g):c}})})},"libs/echarts/light":function(){(function(p,h){"function"===typeof define&&define.amd?define(["exports","./echarts"],h):"object"===typeof exports&&"string"!==typeof exports.nodeName?h(exports,require("./echarts")):
h({},p.echarts)})(this,function(p,h){h?h.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:1}},lineStyle:{normal:{width:"1"}},
symbolSize:"6",symbol:"circle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},
categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",
color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",
textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(p,h){"function"===typeof define&&define.amd?define(["exports","./echarts"],h):"object"===typeof exports&&"string"!==typeof exports.nodeName?h(exports,require("./echarts")):h({},p.echarts)})(this,function(p,h){h?h.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),textStyle:{},title:{textStyle:{color:"#ffffff"},
subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{borderWidth:"1"}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{borderWidth:"1"}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},bar:{itemStyle:{normal:{barBorderWidth:0,barBorderColor:"#ccc"},emphasis:{barBorderWidth:0,barBorderColor:"#ccc"}}},pie:{itemStyle:{normal:{borderWidth:0,borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},funnel:{itemStyle:{normal:{borderWidth:0,
borderColor:"#ccc"},emphasis:{borderWidth:0,borderColor:"#ccc"}}},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},
valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",
width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"jimu/dijit/_StatisticsChartSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_StatisticsChartSettings.html dijit/ColorPalette jimu/utils".split(" "),
function(p,h,n,c,a,f,d,g,m,r,l,b,e,k){return p([m,r,l,g],{baseClass:"jimu-dijit-statistics-chart-settings",templateString:b,colors:{c1:"#5d9cd3 #eb7b3a #a5a5a5 #febf29 #4673c2 #72ad4c".split(" "),c2:"#5d9cd3 #a5a5a5 #4673c2 #285f8f #636363 #274577".split(" "),c3:"#eb7b3a #febf29 #72ad4c #9c4618 #987214 44682e".split(" "),c4:"#72ad4c #4673c2 #febf29 #44682e #274577 #987214".split(" "),g1:["#43729b","#c4d5ea"],g2:["#ac5928","#f5ccbf"],g3:["#787878","#d8d8d8"],g4:["#bb8b1b","#fee1be"],g5:["#30538d",
"#c0c9e3"],g6:["#517e36","#c9dbc2"],g7:["#c4d5ea","#43729b"],g8:["#f5ccbf","#ac5928"],g9:["#d8d8d8","#787878"],g10:["#fee1be","#bb8b1b"],g11:["#c0c9e3","#30538d"],g12:["#c9dbc2","#517e36"]},palette:null,defaultSingleColor:"#5d9cd3",multiColorValue:"c1",imagesUrl:window.require.toUrl("jimu/css/images/chart/"),isInWidget:!1,type:"",singleColor:!1,config:null,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},postCreate:function(){this.inherited(arguments);this._initSelf();this.isInWidget&&
this._bindEvents();this.own(d(this.multiColorSection,"click",h.hitch(this,function(b){b=b.target||b.srcElement;if(c.hasClass(b,"multi-color")&&!c.hasClass(b,"selected")){var a=this.multiColorValue;this._selectMultiColorDiv(b);a!==b.colorValue&&this.isInWidget&&this._configChange()}})))},_initSelf:function(){this.config=h.clone(this.config);k.combineRadioCheckBoxWithLabel(this.cbxAxisX,this.labelAxisX);k.combineRadioCheckBoxWithLabel(this.cbxAxisY,this.labelAxisY);k.combineRadioCheckBoxWithLabel(this.cbxPieLabel,
this.labelPie);this._setSingleColorForColorDiv(this.defaultSingleColor);this.palette=new e({palette:"7x10",cellClass:"cursor:pointer",style:{width:"220px"},onChange:h.hitch(this,function(b){var a=this._getSingleColorFromColorDiv();this._setSingleColorForColorDiv(b);this.isInWidget&&a!==b&&this._configChange()})});this.palette.placeAt(this.paletteContainer);this.palette.startup();n.forEach(["c1","c2","c3","c4"],h.hitch(this,function(b){c.create("div",{"class":"multi-color colorful "+b},this.colorfulContainer).colorValue=
b}));n.forEach("g1 g2 g3 g4 g5 g6 g7 g8 g9 g10 g11 g12".split(" "),h.hitch(this,function(b){c.create("div",{"class":"multi-color monochromatic "+b},this.monochromaticContainer).colorValue=b}));this._setMultiColorValue("c1");"pie"===this.type?(this.singleColor=!1,c.setStyle(this.divAxisX,"display","none"),c.setStyle(this.divAxisY,"display","none")):c.setStyle(this.divPieLabel,"display","none");this.reset();this.config&&this.setConfig(this.config)},_bindEvents:function(){"pie"===this.type?this.own(d(this.cbxPieLabel,
"change",h.hitch(this,this._configChange))):(this.own(d(this.cbxAxisX,"change",h.hitch(this,this._configChange))),this.own(d(this.cbxAxisY,"change",h.hitch(this,this._configChange))))},setConfig:function(b){this.reset();this.cbxAxisX.checked=!1===b.showHorizontalAxis?!1:!0;this.cbxAxisY.checked=!1===b.showVerticalAxis?!1:!0;this.cbxPieLabel.checked=!1===b.showDataLabel?!1:!0;b=h.clone(b.colors||[]);(this.singleColor=1===b.length&&"pie"!==this.type)?this.showSingleColor(b[0]):this.showMultiColor(b)},
getConfig:function(){var b={colors:[]};"pie"===this.type?(b.colors=this.colors[this._getMultiColorValue()],2===b.colors.length&&(b.colors=this._createHexColors(b.colors[0],b.colors[1],6)),b.showDataLabel=this.cbxPieLabel.checked):(b.showHorizontalAxis=this.cbxAxisX.checked,b.showVerticalAxis=this.cbxAxisY.checked,b.colors=this.singleColor?[this._getSingleColorFromColorDiv()]:this.colors[this._getMultiColorValue()]);return b},_setSingleColorForColorDiv:function(b){c.setStyle(this.colorDiv,"backgroundColor",
b);this.colorDiv.bgHex=b},_getSingleColorFromColorDiv:function(){return this.colorDiv.bgHex},_setMultiColorValue:function(b){(b=a("."+b,this.multiColorSection))&&0<b.length&&this._selectMultiColorDiv(b[0])},_selectMultiColorDiv:function(b){a(".multi-color",this.multiColorSection).removeClass("selected");c.addClass(b,"selected");this.multiColorValue=b.colorValue},_getMultiColorValue:function(){return this.multiColorValue},reset:function(){"pie"===this.type?this.cbxPieLabel.checked=!0:(this.cbxAxisX.checked=
!0,this.cbxAxisY.checked=!0);this.singleColor?this.showSingleColor():this.showMultiColor()},showSingleColor:function(b){"pie"===this.type?this.singleColor=!1:(this.singleColor=!0,c.setStyle(this.singleColorSection,"display","block"),c.setStyle(this.multiColorSection,"display","none"),b&&this._setSingleColorForColorDiv(b))},showMultiColor:function(b){this.singleColor=!1;c.setStyle(this.singleColorSection,"display","none");c.setStyle(this.multiColorSection,"display","block");if(b&&0<b.length){var a=
null,d=!1,e;for(e in this.colors)if(a=this.colors[e],d=!1,a.length===b.length&&(d=n.every(a,h.hitch(this,function(a,c){var d=new f(a),e=new f(b[c]);return d.toHex().toLowerCase()===e.toHex().toLowerCase()})))){this._setMultiColorValue(e);break}}},showShelter:function(){c.setStyle(this.shelter,"display","block")},hideShelter:function(){c.setStyle(this.shelter,"display","none")},_configChange:function(){var b=this.getConfig();this.emit("change",b)},_createHexColors:function(b,a,c){var d=[];b=f.fromHex(b);
var e=f.fromHex(a);a=(e.r-b.r)/(c-1);for(var g=(e.g-b.g)/(c-1),e=(e.b-b.b)/(c-1),l=null,m=0;m<c;m++)l=new f,l.r=Math.floor(b.r+a*m),l.g=Math.floor(b.g+g*m),l.b=Math.floor(b.b+e*m),d.push(l.toHex());return d}})})},"widgets/Infographic/dijits/GaugeDijit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html ./BaseDijit jimu/utils jimu/dijit/Chart ./utils".split(" "),function(p,h,n,c,a,f,d){return p([c],{templateString:'\x3cdiv style\x3d"height:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"gauge"\x3e\x3c/div\x3e\x3c/div\x3e',
type:"gauge",config:null,postCreate:function(){this.inherited(arguments);this.features=[];this.DEFAULT_GAUGE_CONFIG={type:"gauge",confine:!0,shape:"curved",min:0,max:100,series:[{data:[0]}]};this.config&&(this.DEFAULT_GAUGE_CONFIG.shape=this.config.shape);this.isDarkTheme()?this.DEFAULT_GAUGE_CONFIG.theme="dark":this.DEFAULT_GAUGE_CONFIG.theme="light";this._initChart();this.setConfig(this.config)},onDataSourceDataUpdate:function(a){this.features=a.features;this._updateStatisticsValue()},resize:function(a,
c){this.chart&&(a&&c?this.chart.resize(a,c):this.chart.resize())},_updateStatisticsValue:function(){if(this.config.statistic&&this.dataSource){var a=d.getSingleValueFromFeatures(this.config.statistic,this.dataSource,this.features),a=this._getVaildValue(a);"number"===typeof a&&(this.value=a,this._setValue(this.config))}},setConfig:function(a){a&&(this.config=a,this.config.display&&this.config.display.backgroundColor&&n.setStyle(this.domNode,"backgroundColor",this.config.display.backgroundColor),this._updateStatisticsValue())},
_setValue:function(c){var d={};d.series=[{data:[this.value]}];var g=!1;"undefined"!==typeof c.max&&"undefined"!==typeof c.min&&(d.max=c.max,d.min=c.min);var l={},b=this._getIndicatorInfo(this.config);if(a.isNotEmptyObject(c.display)){var e=c.display;e.backgroundColor&&n.setStyle(this.domNode,"backgroundColor",e.backgroundColor);e.gaugeColor&&(l.columnColor=e.gaugeColor);e.bgColor&&(l.bgColor=e.bgColor);if(a.isNotEmptyObject(e.dataLabels)&&e.dataLabels.state){var k=e.dataLabels;l.showDataRangeLabel=
!!k.dataRange;l.showTargetValueLabel=!!k.targetValue;g=l.showTargetValueLabel;l.labelColor=k.textColor||""}if(a.isNotEmptyObject(e.currentValue)&&e.currentValue.state){var k=e.currentValue,e={},f=k.dataFormat;f&&""!==f.decimalPlaces&&"undefined"!==typeof f.decimalPlaces&&(e.decimalPlaces=Number(f.decimalPlaces));f=h.hitch(this,function(b,a){var d,e,g="";b.isRatio?(d=a/c.max,d*=100,g="%"):d=a;if(b.dataFormat){var l=b.dataFormat;b.isRatio||("percentage"===l.unit?(d*=100,g="%"):"thousand"===l.unit?(g=
this.nls.thousandAbbreviation,d/=1E3):"million"===l.unit?(g=this.nls.millionAbbreviation,d/=1E6):"billion"===l.unit&&(g=this.nls.billionAbbreviation,d/=1E9));""!==l.decimalPlaces&&"undefined"!==typeof l.decimalPlaces&&(d=d.toFixed(Number(l.decimalPlaces)));e=d+g;l.prefix&&(e=l.prefix+" "+e);l.suffix&&(e+=" "+l.suffix)}return e},k,this.value);e.formatter=f;k.font&&(f={},"undefined"!==typeof k.font.fontSize&&(f.fontSize=Number(k.font.fontSize)),k.font.textColor&&(f.color=k.font.textColor),b.valueColor&&
(f.color=b.valueColor),k.font&&k.font.font&&(k=k.font.font,f.fontWeight=k.bold?"bold":"normal",k.fontFamily&&(f.fontFamily=k.fontFamily),f.fontStyle=k.italic?"italic":"normal"),e.textStyle=f);l.valueStyle=e}}b.targetValue&&(l.targetValue=g?b.targetValue:[]);b.columnColor&&(l.columnColor=b.columnColor);d.gaugeOption=l;this.chart.updateConfig(d)},_getIndicatorInfo:function(c){var g=!1,f=!1,l=!1,b=this._getIndicatorValues(c);a.isNotEmptyObject(b,!0)&&(g=b);if(b=c.indicators)(c=d.getVaildIndicator(this.value,
b,c.max))&&c.gaugeColor&&(f=c.gaugeColor),c&&c.valueColor&&(l=c.valueColor);return{targetValue:g,columnColor:f,valueColor:l}},_initChart:function(){this.chart=new f({chartDom:this.domNode,config:this.DEFAULT_GAUGE_CONFIG});this.chart.placeAt(this.domNode);setTimeout(h.hitch(this,function(){this.chart.resize()}),300)},_getVaildValue:function(a){if("undefined"!==typeof a)return Number(a)},_getIndicatorValues:function(c){var d=[];c.indicators&&(c.indicators.forEach(function(a){a.value&&a.value.forEach(h.hitch(this,
function(l){d.push(a.isRatio?l/100*c.max:l)}))}),d.sort(function(a,c){return a-c}),d=a.uniqueArray(d));return d}})})},"widgets/Infographic/dijits/utils":function(){define("dojo/on dojo/_base/lang dojo/_base/array esri/geometry/geometryEngine jimu/utils jimu/DataSourceManager jimu/statisticsUtils".split(" "),function(p,h,n,c,a,f,d){return{getClientFeaturesFromMap:function(c,d,f,l){var b=[],b=f?0<d.getSelectedFeatures().length?d.getSelectedFeatures():d.graphics:d.graphics;l&&(b=this._filterFeaturesByExtent(c.extent,
b));if(0<b.length){var e=a.getObjectIdField(d);e&&(c=b[0])&&c.attributes&&c.attributes.hasOwnProperty(e)&&b.sort(function(b,a){b.attributes||(b.attributes={});a.attributes||(a.attributes={});var c=b.attributes[e],d=a.attributes[e];return c<d?-1:c>d?1:0})}return b},listenClientFeaturesFromMap:function(a,c,d,l,b){var e=[];d&&(e.push(p(c,"selection-complete",h.hitch(this,function(){b(this.getClientFeaturesFromMap(a,c,d,l))}))),e.push(p(c,"selection-clear",h.hitch(this,function(){b(this.getClientFeaturesFromMap(a,
c,d,l))}))));l&&e.push(p(a,"extent-change",h.hitch(this,function(){0<c.graphics.length&&b(this.getClientFeaturesFromMap(a,c,d,l))})));e.push(p(c,"update-end",h.hitch(this,function(){b(this.getClientFeaturesFromMap(a,c,d,l))})));b(this.getClientFeaturesFromMap(a,c,d,l));return{remove:function(){e&&n.forEach(e,h.hitch(this,function(b){b.remove()}));e=null}}},getVaildIndicator:function(a,c,d){var l=[];c.map(h.hitch(this,function(b){(b=this._handleOperator(b,a,d))&&l.push(b)}));if(0<l.length)return l[l.length-
1]},getSingleValueFromFeatures:function(a,c,d){var l=f.getInstance(),b=0;if("Features"===a.type){if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===c.dataSourceType||"Features"===l.getDataSourceConfig(c.frameWorkDsId).type)return d.length;b=0;n.forEach(d,function(a){b+=a.attributes.count});return b}if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===c.dataSourceType||"Features"===l.getDataSourceConfig(c.frameWorkDsId).type)return this._getStatsFromFeatures(d,a.fieldName,a.statisticsType);var e=0,g=0,b=0;n.forEach(d,
function(c){var d=c.attributes[a.fieldName+"_"+a.statisticsType];switch(a.statisticsType){case "sum":e+=d;break;case "min":e=Math.min(e,d);break;case "max":e=Math.max(e,d);break;case "avg":g+=c.attributes[a.fieldName+"_sum"],b+=c.attributes.count}});"avg"===a.statisticsType&&(e=0===b?0:g/b);return e},filterFeaturesByDataSourceSetting:function(a,c,d){if(0===a.length)return[];if(c.useSelection){var l=a[0].getLayer();if(l){var b=l.getSelectedFeatures();0<b.length&&(a=n.filter(a,function(a){return-1<
b.indexOf(a)}))}}c.filterByExtent&&(a=this._filterFeaturesByExtent(d.extent,a));return a},_getStatsFromFeatures:function(a,c,f){return d.getStatisticsResultFromClientSync({featureSet:{features:a},fieldName:c,statisticTypes:[f]})[f+"Field"]},_filterFeaturesByExtent:function(a,d){var f=a.normalize();return d=n.filter(d,h.hitch(this,function(a){try{if(a.geometry){var b="point"===a.geometry.type||"multipoint"===a.geometry;return n.some(f,h.hitch(this,function(d){return b?d.contains(a.geometry):c.intersects(d,
a.geometry)}))}}catch(e){console.error(e)}return!1}))},_handleOperator:function(a,c,d){function l(a){b={};a.valueColor&&(b.valueColor=a.valueColor);a.gaugeColor&&(b.gaugeColor=a.gaugeColor);a.iconInfo&&(b.iconInfo=a.iconInfo)}var b,e=a.value.map(h.hitch(this,function(b){return a.isRatio?b/100*d:b}));"greater"===a.operator&&c>e[0]?l(a):"smaller"===a.operator&&c<e[0]?l(a):"between"===a.operator&&c>e[0]&&c<e[1]?l(a):"equal"===a.operator&&c===e[0]?l(a):"notEqual"===a.operator&&c!==e[0]&&l(a);return b},
isInteger:function(a){return"number"===typeof a&&0===a%1}}})},"widgets/Infographic/dijits/NumberDijit":function(){define("dojo/_base/declare dojo/_base/lang ./BaseDijit dojo/dom-style dojo/_base/html jimu/utils ./utils ./styleUtils jimu/LayerInfos/LayerInfos jimu/DataSourceManager".split(" "),function(p,h,n,c,a,f,d,g,m,r){return p([n],{templateString:'\x3cdiv style\x3d"height:100%;width:100%;"\x3e\x3ca data-dojo-attach-point\x3d"numberContent" class\x3d"number-content no-trim" target\x3d"_blank"\x3e\x3cdiv data-dojo-attach-point\x3d"leftIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"number" class\x3d"number"\x3e\x3cdiv data-dojo-attach-point\x3d"prefix" class\x3d"prefix"\x3e\x3c/div\x3e\x3cdiv class\x3d"value-content" data-dojo-attach-point\x3d"valueContent"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"suffix" class\x3d"suffix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"rightIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e',
baseClass:"infographic-number-dijit",type:"number",config:null,postCreate:function(){this.inherited(arguments);this.value=this.features=null;this.setConfig(this.config)},onDataSourceDataUpdate:function(a){this.features=a.features;this._updateStatisticsValue()},setDataSource:function(a){this.dataSource=a;if(a.layerId){var b=m.getInstanceSync().getLayerInfoById(a.layerId);b&&b.getLayerObject().then(h.hitch(this,function(b){this.features=d.getClientFeaturesFromMap(this.map,b,a.useSelection,a.filterByExtent);
this._updateStatisticsValue()}))}else a.frameWorkDsId&&(b=r.getInstance().getData(a.frameWorkDsId))&&(this.features=b.features,this._updateStatisticsValue())},_updateStatisticsValue:function(){this.value=this.features&&this.config.statistic&&this.dataSource?d.getSingleValueFromFeatures(this.config.statistic,this.dataSource,this.features):null;this._updateUI(this.config,this.value)},setConfig:function(c){c&&c.background&&c.background.backgroundColor?a.setStyle(this.domNode,"backgroundColor",c.background.backgroundColor):
a.setStyle(this.domNode,"backgroundColor","#FFFFFF");this.config=c;this._updateStatisticsValue()},_updateUI:function(a,b){this._cleanUI();this.config=a;this.valueContent.innerHTML=null===b?this.nls.noData:b;f.isNotEmptyObject(this.config)&&this._setValueDisplay(this.config)},_setValueDisplay:function(a){a&&(this._setBackground(a),this._setFont(a),"undefined"!==typeof this.value&&(this._setDataFormat(a),a=this._getIndicatorColor(),a.color&&this._setValueColor(a.color),a.icon&&this._setIndicatorIcon(a.icon)))},
_setIndicatorIcon:function(a){a&&("left"===a.placement||"right"===a.placement?this._setLeftRightIcon(a):"replace"===a.placement&&this._setReplaceIcon(a))},_setReplaceIcon:function(d){var b=a.create("div",{"class":"indicator-icon "+d.icon});a.empty(this.valueContent);a.place(b,this.valueContent);c.set(b,"color",d.color);c.set(b,"display","inline-flex")},_setLeftRightIcon:function(d){var b;"left"===d.placement?b=this.leftIcon:"right"===d.placement&&(b=this.rightIcon);a.addClass(b,"indicator-icon "+
d.icon);c.set(b,"color",d.color)},_getIndicatorColor:function(){var a=!1,b=!1,c=this.config.indicators;c&&((c=d.getVaildIndicator(this.value,c))&&c.valueColor&&(a=c.valueColor),c&&f.isNotEmptyObject(c.iconInfo)&&(b=c.iconInfo));return{color:a,icon:b}},_setFont:function(c){if(c&&c.font){var b={};g.font.setStyle(c.font,b);a.setStyle(this.number,b)}},_setDataFormat:function(a){if(this.value&&a&&a.dataFormat){var b=this.value,c="";a=a.dataFormat;"percentage"===a.unit?(b*=100,c="%"):"thousand"===a.unit?
(c=this.nls.thousandAbbreviation,b/=1E3):"million"===a.unit?(c=this.nls.millionAbbreviation,b/=1E6):"billion"===a.unit&&(c=this.nls.billionAbbreviation,b/=1E9);""!==a.decimalPlaces&&"undefined"!==typeof a.decimalPlaces&&(b=b.toFixed(Number(a.decimalPlaces)));this.valueContent.innerHTML=b+c;a.prefix&&(this.prefix.innerHTML=a.prefix);a.suffix&&(this.suffix.innerHTML=a.suffix)}},_cleanUI:function(){a.removeClass(this.leftIcon);a.addClass(this.leftIcon,["icon"]);a.removeClass(this.rightIcon);a.addClass(this.rightIcon,
["icon"]);this.replaceIcon&&(a.destroy(this.replaceIcon),this.replaceIcon=null);a.empty(this.valueContent);a.empty(this.prefix);a.empty(this.suffix);this._setValueColor("")},_getVaildValue:function(a){if("undefined"!==typeof a)return Number(a)},_setBackground:function(c){if(c&&c.background){c=c.background;c.backgroundColor&&a.setStyle(this.domNode,"backgroundColor",c.backgroundColor);if(c.alignment){var b=c.alignment;a.removeClass(this.domNode);a.addClass(this.domNode,"infographic-number-dijit");
b.horizontal&&a.addClass(this.domNode,"horizontal-"+b.horizontal);b.vertical&&a.addClass(this.domNode,"vertical-"+b.vertical)}c.link?a.setAttr(this.numberContent,"href",c.link):a.removeAttr(this.numberContent,"href")}},_setValueColor:function(a){c.set(this.number,"color",a)}})})},"widgets/Infographic/_ChartSetting":function(){define(["dojo/_base/declare","dojo/_base/html","dijit/_WidgetBase","dijit/_TemplatedMixin","dojo/text!./_ChartSetting.html"],function(p,h,n,c,a){return p([n,c],{templateString:a,
baseClass:"ig-chart-setting-dlg",postCreate:function(){"pie"===this.chartJson.config.type?(h.setStyle(this.verticalAxisSection,"display","none"),h.setStyle(this.horizontalAxisSection,"display","none")):h.setStyle(this.dataLabelsSection,"display","none");this.chartJson.config.showLegend&&this._toggle(this.legendToggle);this.chartJson.config.showDataLabel&&this._toggle(this.dataLabelsToggle);this.chartJson.config.showHorizontalAxis&&this._toggle(this.horizontalAxisToggle);this.chartJson.config.showVerticalAxis&&
this._toggle(this.verticalAxisToggle)},_toggle:function(a){h.hasClass(a,"toggle-on")?(h.removeClass(a,"toggle-on"),h.addClass(a,"toggle-off")):(h.removeClass(a,"toggle-off"),h.addClass(a,"toggle-on"))},_onToggleClick:function(a){var c=a.target;this._toggle(c);a=h.hasClass(c,"toggle-on")?!0:!1;c=h.attr(c,"data-id");"legend"===c?this.chartJson.config.showLegend=a:"dataLabels"===c?this.chartJson.config.showDataLabel=a:"horizontalAxis"===c?this.chartJson.config.showHorizontalAxis=a:"verticalAxis"===c&&
(this.chartJson.config.showVerticalAxis=a);this.chartDijit.setConfig(this.chartJson.config)}})})},"widgets/Infographic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/StatisticsChart.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader" style\x3d"margin-bottom:15px;"\x3e\r\n\t\t\x3cdiv class\x3d"chart-title jimu-float-leading" data-dojo-attach-point\x3d"chartTitle"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"paging-section jimu-float-leading"\x3e\r\n\t\t\t\x3cul data-dojo-attach-point\x3d"pagingUl" data-dojo-attach-event\x3d"onclick:_onPagingUlClicked"\x3e\x3c/ul\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"zoomin jimu-float-trailing" data-dojo-attach-point\x3d"zoominIcon"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"settings jimu-float-trailing" data-dojo-attach-point\x3d"settingsIcon"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"chart-section"\x3e\r\n\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;table-layout:fixed;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item left-arrow arrow" data-dojo-attach-point\x3d"leftArrow" data-dojo-attach-event\x3d"onclick:_onLeftArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"content-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item chart-container" data-dojo-attach-point\x3d"chartContainer" dir\x3d"ltr"\r\n\t\t\t\t\t\tstyle\x3d"direction:ltr;overflow:hidden;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item right-arrow arrow" data-dojo-attach-point\x3d"rightArrow" data-dojo-attach-event\x3d"onclick:_onRightArrowClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_StatisticsChartSettings.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisX" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxAxisX" type\x3d"checkbox" /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelAxisX"\x3e${nls.horizontalAxis}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisY" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxAxisY" type\x3d"checkbox" /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelAxisY"\x3e${nls.verticalAxis}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divPieLabel" class\x3d"setting-item"\x3e\r\n\t\t\x3cinput data-dojo-attach-point\x3d"cbxPieLabel" type\x3d"checkbox" checked /\x3e\r\n\t\t\x3clabel data-dojo-attach-point\x3d"labelPie"\x3e${nls.dataLabels}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv\x3e\r\n\t\t\x3cdiv class\x3d"color-tip"\x3e${nls.color}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"singleColorSection" class\x3d"single-color-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorDiv" class\x3d"single-color-div"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"paletteContainer" class\x3d"palette-container"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"multiColorSection" class\x3d"multi-color-section"\x3e\r\n\t\t\t\x3cdiv class\x3d"colorful-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorfulContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"monochromatic-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monochromaticContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"shelter" data-dojo-attach-point\x3d"shelter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/_ChartSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"legendSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.legend}"\x3e${nls.legend}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"legendToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"legend"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"dataLabelsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.dataLabels}"\x3e${nls.dataLabels}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dataLabelsToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"dataLabels"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"horizontalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.horizontalAxis}"\x3e${nls.horizontalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"horizontalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"horizontalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"verticalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.verticalAxis}"\x3e${nls.verticalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"verticalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"verticalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/Widget.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\x3c/div\x3e',"url:widgets/Infographic/css/style.css":'@font-face {font-family: \'icomoon\'; src: url("fonts/icomoon.eot?oflavm"); src: url("fonts/icomoon.eot?oflavm#iefix") format(\'embedded-opentype\'), url("fonts/icomoon.ttf?oflavm") format(\'truetype\'), url("fonts/icomoon.woff?oflavm") format(\'woff\'), url("fonts/icomoon.svg?oflavm#icomoon") format(\'svg\'); font-weight: normal; font-style: normal;}.jimu-widget-infographic .indicator-icon,.jimu-widget-infographic-setting .indicator-icon {font-family: \'icomoon\' !important; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}.icon-like:before {content: "\\e900";}.icon-unlike:before {content: "\\e904";}.icon-stop:before {content: "\\e902";}.icon-danger:before {content: "\\e901";}.icon-star:before {content: "\\e903";}.icon-alarm:before {content: "\\e906";}.icon-down:before {content: "\\e909";}.icon-right:before {content: "\\e90f";}.icon-up:before {content: "\\e911";}.icon-wrong:before {content: "\\e912";}.lm_goldenlayout .lm_item .lm_content {position: relative;}.lm_goldenlayout .lm_item .lm_content .table-layout-container {display: table; table-layout: fixed; overflow: hidden; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .table-layout-container \x3e div {padding: 10px 15px;}.lm_goldenlayout .lm_item .lm_content .image-node {display: table-cell; overflow: hidden; position: relative; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .no-trim {white-space: pre-wrap;}.infographic-number-dijit {display: flex; justify-content: center; align-items: center;}.infographic-number-dijit .number-content .value-content {white-space: nowrap;}.infographic-number-dijit a,.infographic-number-dijit a:hover,.infographic-number-dijit a:visited,.infographic-number-dijit a:link,.infographic-number-dijit a:active {text-decoration: none;}.infographic-number-dijit.horizontal-left {justify-content: flex-start;}.infographic-number-dijit.horizontal-center {justify-content: center;}.infographic-number-dijit.horizontal-right {justify-content: flex-end;}.infographic-number-dijit.vertical-top {align-items: flex-start;}.infographic-number-dijit.vertical-middle {align-items: center;}.infographic-number-dijit.vertical-bottom {align-items: flex-end;}.infographic-number-dijit .number-content {display: flex; justify-content: center; max-width: 340px;}.infographic-number-dijit .number {display: flex; justify-content: space-between; align-items: baseline;}.infographic-number-dijit .indicator-icon {font-size: 22px; align-self: center; text-align: center;}.infographic-number-dijit .number .prefix {margin-right: 6px;}.infographic-number-dijit .number .suffix {margin-left: 6px;}.infographic-number-dijit .rightImgDiv {width: 35%; height: 100%; text-align: left;}.infographic-chart-dijit {position: relative;}.infographic-chart-dijit .no-data-tip {display: none; position: absolute; left: 0; right: 0; height: 30px; top: 50%; margin: -15px; text-align: center; color: #666;}.infographic-chart-dijit.no-data .no-data-tip {display: block;}.jimu-widget-infographic {position: relative; width: 100%; height: 100%;}.jimu-widget-infographic .chart-setting {position: absolute; top: 0; right: 0; cursor: pointer; width: 16px; height: 16px; background: no-repeat center center url(images/chart-setting.svg); z-index: 1;}.ig-chart-setting-dlg .jimu-leading-margin10 {margin-left: 10px; margin-right: 0;}.jimu-rtl .ig-chart-setting-dlg .jimu-leading-margin10 {margin-right: 10px; margin-left: 0;}.ig-chart-setting-dlg .textOverFlow {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.ig-chart-setting-dlg .flex {display: flex; justify-content: space-between; margin-top: 8px;}.ig-chart-setting-dlg .label {width: 120px;}.ig-chart-setting-dlg .toggle {width: 38px; height: 18px; cursor: pointer;}.ig-chart-setting-dlg .toggle.toggle-on {background: no-repeat center left url(./images/Toggle_On.svg);}.ig-chart-setting-dlg .toggle.toggle-off {background: no-repeat center left url(./images/Toggle_Off.svg);}',
"*now":function(p){p(['dojo/i18n!*preload*widgets/Infographic/nls/Widget*["ar","bs","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sr","sv","th","tr","zh-cn","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dijit/_WidgetsInTemplateMixin dijit/popup dijit/TooltipDialog jimu/BaseWidget jimu/dijit/GridLayout jimu/DataSourceManager jimu/LayerInfos/LayerInfos jimu/utils ./DijitFactory ./dijits/utils ./_ChartSetting".split(" "),function(p,h,n,c,a,f,d,g,m,r,l,b,e,k,q,y){return p([m,f],{name:"Infographic",baseClass:"jimu-widget-infographic",dijits:null,clientFeaturesHandle:null,layerInfosObj:null,postCreate:function(){this.inherited(arguments);
this.dijits=[];this.layerInfosObj=b.getInstanceSync();k.setNls(this.nls);k.setMap(this.map);k.setInSettingPage(!1);k.setAppConfig(this.appConfig);k.setContext({folderUrl:this.folderUrl});this.on("click",h.hitch(this,function(){this.chartSettingDialog&&d.close(this.chartSettingDialog)}));this._features=[]},startup:function(){this.inherited(arguments);this._createUI();this._createChartSettingBtn()},onOpen:function(){if(this.config.dataSource)if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===this.config.dataSource.dataSourceType){var a=
this.layerInfosObj.getLayerInfoById(this.config.dataSource.layerId);a&&a.getLayerObject().then(h.hitch(this,function(a){a&&(this.clientFeaturesHandle=q.listenClientFeaturesFromMap(this.map,a,this.config.dataSource.useSelection,this.config.dataSource.filterByExtent,h.hitch(this,this._onClientFeaturesUpdate)))}))}else"DATA_SOURCE_FROM_FRAMEWORK"===this.config.dataSource.dataSourceType&&(a=l.getInstance().getData(this.config.dataSource.frameWorkDsId))&&this._onDataUpdate(a)},onClose:function(){this._releaseHanlde();
this.chartSettingDialog&&this.chartSettingDialog.isShow&&(d.close(this.chartSettingDialog),this.chartSettingDialog.isShow=!1)},destroy:function(){this._releaseHanlde();this.chartSettingDialog&&(this.chartSettingDialog.destroy(),this.chartSettingDialog=null);this.inherited(arguments)},_releaseHanlde:function(){this.clientFeaturesHandle&&this.clientFeaturesHandle.remove();this.clientFeaturesHandle=null},_createUI:function(){if(this.config.layout){n.forEach(this.dijits,h.hitch(this,function(a){a.destroy()}));
this.dijits=[];var a=n.map(this.config.dijits,function(a){var b=k.createDijit(a);b.setDataSource(this.config.dataSource);this.dijits.push(b);return{id:a.id,dijit:b}},this);this.layout=new r({components:a,layoutDefinition:this.config.layout.definition,container:this.domNode,editable:!1});this.layout.on("initialised",h.hitch(this,function(){n.forEach(this.dijits,h.hitch(this,function(a){a.startup()}))}))}},_createChartSettingBtn:function(){this.config.dijits&&n.some(this.config.dijits,function(a){return a.visible&&
"chart"===a.type},this)&&(this.chartSettingNode=c.create("div",{"class":"chart-setting"},this.domNode),this.own(a(this.chartSettingNode,"click",h.hitch(this,this._onChartSettingClick))),this.chartSettingDialog=new g({content:this._createChartSettingContent()}),this.chartSettingDialog.isShow=!1)},_onChartSettingClick:function(a){this.chartSettingDialog.isShow?(d.close(this.chartSettingDialog),this.chartSettingDialog.isShow=!1):(d.open({popup:this.chartSettingDialog,around:this.chartSettingNode}),this.chartSettingDialog.isShow=
!0);a.stopPropagation()},_createChartSettingContent:function(){var a=n.filter(this.config.dijits,function(a){return"chart"===a.type})[0];return a?a.config?(new y({chartJson:a,chartDijit:n.filter(this.dijits,function(b){return b.jsonId===a.id})[0],nls:this.nls})).domNode:"\x3cdiv\x3e\x3c/div\x3e":(console.error("Unknow error"),"\x3cdiv\x3e\x3c/div\x3e")},onDataSourceDataUpdate:function(a,b){this.config.dataSource&&a===this.config.dataSource.frameWorkDsId&&(b.features=q.filterFeaturesByDataSourceSetting(b.features,
this.config.dataSource,this.map),this._onDataUpdate(b))},_onClientFeaturesUpdate:function(a){this._onDataUpdate({features:a})},_onDataUpdate:function(a){var b=n.map(this._features,function(a){return a.attributes}),c=n.map(a.features,function(a){return a.attributes});e.isEqual(b,c)||(this._features=a.features,n.forEach(this.dijits,h.hitch(this,function(b){b.onDataSourceDataUpdate(a)})))},resize:function(){this.inherited(arguments);this.layout&&this.layout.resize()}})});